function flightDynamicClass(){function t(t){return t.length>10?t.substr(0,4)+"……"+t.substr(-4,4):t}function e(){function t(t){if(void 0==t||""==t)return"";var e=t+"";return e.length<2&&(e="0"+e),e}$("#zhInstructList").click(function(){layer.open({type:1,title:"<strong>指令列表</strong>",area:["900px","500px"],content:'<table class="zh-table zh-instruct-table"><tr><td width="100"><span class="zh-field-name">查询类型</span></td><td>查询指令</td><td width="150">查询指令</td></tr><tr><td><span class="zh-field-name">激活指令查询框</span></td><td>Enter(回车键) / 点击指令输入框</td><td>--</td></tr><tr><td><span class="zh-field-name">退出指令查询框</span></td><td>ESC键 / 点击非指令输入框区域</td><td>--</td></tr><tr><td><span class="zh-field-name">重置航班列表</span></td><td>Delete(删除键) / 点击重置按钮</td><td>--</td></tr><tr><td><span class="zh-field-name">查询航班</span></td><td>直接输入完整航班号,多个航班请用空格间隔</td><td>MU1234 CA2235 KY774</td></tr><tr><td><span class="zh-field-name">查询状态</span></td><td>输入状态缩写ZT QF(起飞) DD(到达) JH(计划) BJ(备降) FH(返航) QX(取消) HH(滑回) YW(全部延误)YW+30M(延误30分钟以上) YW+1H(延误1小时以上) YW+2H(延误2小时以上) YW+4H(延误4小时以上)</td><td>ZT QX YW+4H</td></tr><tr><td><span class="zh-field-name">查询航司</span></td><td>输入航司缩写HS 多个航司用空格间隔</td><td>HS CA HU DR</td></tr><tr><td><span class="zh-field-name">查询机场</span></td><td>输入机场缩写JC 多个机场用空格间隔</td><td>JC PEK SHA HKG</td></tr><tr><td><span class="zh-field-name">查询航班类型</span></td><td>输入属性缩写LX 多种类型用空格间隔,GJ(国际) GN(国内) DQ(地区)</td><td>LX GJ DQ</td></tr><tr><td><span class="zh-field-name">查询要客航班</span></td><td>输入指令:VIP</td><td>VIP</td></tr><tr><td><span class="zh-field-name">查询机位航班</span></td><td>输入指令:JW,多个机位用空格间隔</td><td>JW 101 102 523R</td></tr><tr><td><span class="zh-field-name">查询区域航班</span></td><td>输入指令:QY,多区域用空格间隔,LQW(廊桥位) JJW(近机位) JHJP(9号机坪) XJP(新机坪) LSJW(临时机位)</td><td>QY LQW JJW</td></tr><tr><td><span class="zh-field-name">查询登机口对应航班</span></td><td>输入指令:DJK,多个登机口编号用空格间隔</td><td>DJK 05 06 08</td></tr><tr><td><span class="zh-field-name">查询行李转盘对应航班</span></td><td>输入指令:XL,多个行李转盘编号用空格间隔</td><td>XL 01 02</td></tr></table>'})}),$("body").on("click",".zh-airline",function(){var t=$(this).parent().parent().parent().children("td").eq(0).find("label").children("input").val();-1!==t.indexOf("_")&&(t=$(this).data("fid"));var e=layer.msg("正在加载数据中,请稍候...",{time:0});$.ajax({type:"GET",url:GET_WEATHER_URL+"?fid="+t,success:function(t){layer.close(e);var a=0;try{$.parseJSON(t);a=1,show_no_permission()}catch(t){a=0}if(1===a)return!1;layer.open({type:1,title:"<strong>航线信息</strong>",area:["900px","482px"],content:t})}})}),$("body").on("click",".zh-fd-transaction .zh-fd-table tr",function(){var t=$(this).attr("data"),e=msg_object[t].from.department,a=msg_object[t].from.truename,i=new Date;i.setTime(1e3*msg_object[t].from.send_time);var l=i.Format("hhmm"),s=msg_object[t].content,n=msg_object[t].need_confirm,d="";$.each(msg_object[t].to,function(t,e){var a=e.to_department_cn;if(1==n)if(e.confirmed_time>0){var i=new Date;i.setTime(1e3*e.confirmed_time);var l=i.Format("yyyy-MM-dd hh:mm:ss");d+=a+"(<small>"+l+"</small>)"}else d+=a+'(<span class="zh-text-red">待确认</span>)';else d+=a+"<span></span>"});var c,r,o='<dl class="zh-news-panel">';o+="<dt>消息详情</dt>",o+="<dd>",o+='<ul class="zh-list clearfix">',o+='<li><span class="zh-field-name">发送部门</span>'+e+"</li>",o+='<li><span class="zh-field-name">消息类型</span>事务催办</li>',o+='<li><span class="zh-field-name">发送时间</span>'+l+"</li>",o+='<li><span class="zh-field-name">发送ID</span>'+a+"</li></ul></dd></dl>",o+='  <dl class="zh-news-panel"><dt>消息内容</dt><dd>'+s+'</dd></dl><dl class="zh-news-panel"><dt>接收部门</dt><dd><div class="zh-content-openable">'+d,o+="</div></dd></dl>",layer.open({type:1,title:"<strong>消息详情</strong>",area:["600px","430px"],content:o}),c=parseInt($(".zh-content-openable").css("line-height")),(r=$(".zh-content-openable").height())>2*c&&($(".zh-content-openable").height(2*c),$(".zh-content-openable").after('<div class="zh-more">更多<span class="zh-icon-arrow"></span></div>')),$("body").off("click",".zh-content-openable+.zh-more"),$("body").on("click",".zh-content-openable+.zh-more",function(){$(this).hasClass("active")?($(this).removeClass("active"),$(this).contents().filter(function(){3==this.nodeType&&(this.nodeValue="更多")}),$(this).prev().height(2*c)):($(this).addClass("active"),$(this).contents().filter(function(){3==this.nodeType&&(this.nodeValue="收起")}),$(this).prev().height(r))})}),$("body").on("click",".zh-fd-list .zh-table .zh-plane-number",function(){var t=layer.msg("正在加载数据中,请稍候...",{time:0}),e=$.trim($(this).html()),a=$(this).data("aircraft-type"),i=$(this).parents("tr").data("flight-date");void 0==i&&(i=$(this).data("flight-date")),$.ajax({type:"GET",url:GET_FLY_INFO_URL+"?aircraft_num="+e+"&f_date="+i,success:function(i){layer.close(t);var l=0;try{$.parseJSON(i);l=1,show_no_permission()}catch(t){l=0}if(1===l)return!1;layer.open({type:1,title:"<strong>执飞信息("+e+" - "+a+")</strong>",area:["1000px","300px"],shade:[.8,"#393D49"],shadeClose:!0,content:i})}})}),$("body").on("click","#zh-field-config .zh-optbody dl dt .zh-recover",function(){var t=$(this).parent().data("default").split(",");$(this).parent().siblings("dd").find(".zh-fd-checkbox").removeClass("active"),$(this).parent().siblings("dd").find(".zh-fd-checkbox").each(function(){var e=""+$(this).data("id");-1!==$.inArray(e,t)&&$(this).addClass("active")})}),$("#zhListConfig").click(function(){var e=layer.msg("正在加载配置中,请稍候...",{time:2e3});$.get(CONFIG_LIST_URL,function(a){layer.close(e);var i=0;try{$.parseJSON(a);i=1,show_no_permission()}catch(t){i=0}if(1===i)return!1;layer.open({type:1,title:"<strong>列表配置</strong>",area:["900px","520px"],btn:["提交","取消"],yes:function(e,a){var i=$("input[name='time_range']:checked").val();if(2==i){var l=$.trim($("input[name='self_time_range_start']").val()),s=$.trim($("input[name='self_time_range_end']").val());if(""==l||""==s)return layer.msg("请输入自定义时间范围时间",{time:1e3}),!1;if(""!==l&&""==s)return layer.msg("请输入自定义时间范围结束时间",{time:1e3}),!1;if(""!==s&&""==l)return layer.msg("请输入自定义时间范围开始时间",{time:1e3}),!1;if(""!==l&&""!==s){var n=/^\d{4}$/;if(!n.test(l)||!n.test(s))return layer.msg("请输入正确的时间格式",{time:1e3}),!1;var c=l.substr(0,2),r=l.substr(2,2);if(parseInt(c)>23||parseInt(r)>59)return layer.msg("请输入正确的时间格式",{time:1e3}),!1;var o=s.substr(0,2),h=s.substr(2,2);if(parseInt(o)>23||parseInt(h)>59)return layer.msg("请输入正确的时间格式",{time:1e3}),!1;if(l==s)return layer.msg("请输入一个有效的时间范围",{time:1e3}),!1;if(parseInt(s)<parseInt(l))return layer.msg("开始时间不能大于结束时间",{time:1e3}),!1}}var _=$("input[name='implent_class']:checked").val(),f=[];$("input[name='list_type[]']").each(function(){$(this).parent().hasClass("active")&&f.push($(this).val())});var u=$("input[name='f_cla[]']"),p=[];$.each(u,function(){$(this).parent().hasClass("active")&&p.push($(this).val())});var m=$("input[name='airlines_type']:checked").val(),v=$("input[name='airports_type']:checked").val(),g=$("input[name='airlines']").val(),b=$("input[name='airports']").val(),x=$("input[name='parking']").val(),k=$("input[name='gate']").val(),w=$("input[name='baggage_turntable']").val(),C=$(".zh-in-out-all>label.active>input").val(),T=[],A=[];$(".zh-in-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;T.push($(this).data("id"))}if("全选"==$(this).text())return!0;A.push($(this).data("id"))});var S=[],O=[];$(".zh-out-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;S.push($(this).data("id"))}if("全选"==$(this).text())return!0;O.push($(this).data("id"))});var j=[],q=[];$(".zh-abnormal-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;j.push($(this).data("id"))}if("全选"==$(this).text())return!0;q.push($(this).data("id"))});var I=[],D=[];$(".zh-attention-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;I.push($(this).data("id"))}if("全选"==$(this).text())return!0;D.push($(this).data("id"))});var E=[],L=[];$(".zh-food-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;E.push($(this).data("id"))}if("全选"==$(this).text())return!0;L.push($(this).data("id"))});var H=[],G=[];$(".zh-meeting-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;H.push($(this).data("id"))}if("全选"==$(this).text())return!0;G.push($(this).data("id"))});var R=[];$(".zh-flight-status-sort tbody tr").each(function(t){R.push($(this).attr("data-flight-status"))});var F=[],P=[];$(".zh-in-all-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;P.push($(this).data("id"))}if("全选"==$(this).text())return!0;F.push($(this).data("id"))}),$(".zh-out-all-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;P.push($(this).data("id"))}if("全选"==$(this).text())return!0;F.push($(this).data("id"))});var U=[],M=[];$(".zh-out-depart-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;U.push($(this).data("id"))}if("全选"==$(this).text())return!0;M.push($(this).data("id"))});var N=[],J=[];$(".zh-out-stop-field-config").find("label").each(function(t){if($(this).hasClass("active")){if("全选"==$(this).text())return!0;N.push($(this).data("id"))}if("全选"==$(this).text())return!0;J.push($(this).data("id"))});var V={time_range:i,self_time_range_start:l,self_time_range_end:s,implent_class:_,list_type:f,f_cla:p,airlines_type:m,airlines:g,airports_type:v,airports:b,parking:x,gate:k,baggage_turntable:w,in_out_all:C,in_field:T,in_field_sort:A,out_field:S,out_field_sort:O,abnormal_field:j,abnormal_field_sort:q,attention_field:I,attention_field_sort:D,food_field:E,food_field_sort:L,meeting_field:H,meeting_field_sort:G,all_field:P,all_field_sort:F,depart_field:U,depart_field_sort:M,stop_field:N,stop_field_sort:J,flight_status_sort:R};null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort();var W=layer.msg("提交中,请稍候...");$.ajax({type:"POST",dataType:"JSON",data:V,url:USER_FLIGHT_LIST_CONFIG_URL,cache:!1,timeout:6e4,beforeSend:function(){},success:function(a){if(layer.close(W),1===a.code){layer.close(e),layer.msg("设置成功，正在刷新列表数据..."),$(".zh-opt-count li").each(function(){$(this).hasClass("active")&&(cur_active=$(this).children("a").attr("type"))});var n=$(".zh-fd-transaction"),c=$(".am-flight-wrap");if(1==C){in_out_all_flag=1,null!==msg_request&&msg_request.abort(),null!==msg_timer&&clearInterval(msg_timer),n.addClass("not-visible"),c.removeClass("not-visible");var r=$(window).height()-$(".zh-navbar").outerHeight()-$(".zh-fd-header").height()-10-20-$(".zh-fd-footer").height()-$(".am-fd-bottom").height();$(".zh-fd-list").height(r),$(".zh-loading-box").css({height:$(".zh-thead-fix").height()});var o=$(".zh-opt-count li").eq(0).find("a").attr("type"),h="";if(void 0==cur_active?(cur_active="all_0",h="active"):-1!==cur_active.indexOf("in")?(cur_active="all_0",h="active"):-1!==cur_active.indexOf("out")?(cur_active="all_0",h="active"):-1!==cur_active.indexOf("all")&&(h="active"),-1==o.indexOf("all")){$(".zh-opt-count li").filter(":lt(2)").remove();var _='<li class="zh-xl '+h+'"><a type="all_0" href="###">进出港：<span class=""></span></a> <div class="zh-arrow"></div><div class="zh-dropdown"> <div type="all_0" class="zh-item">全部</div> <div type="all_1" class="zh-item">前站计划</div> <div type="all_2" class="zh-item">前站起飞</div> <div type="all_3" class="zh-item">到达本场</div> <div type="all_4" class="zh-item">出港计划</div> <div type="all_5" class="zh-item">出港已飞</div> </div></li>';$(".zh-opt-count").prepend(_)}}else{in_out_all_flag=0,n.removeClass("not-visible"),c.addClass("not-visible");r=$(window).height()-$(".zh-navbar").outerHeight()-$(".zh-fd-header").height()-10-20-$(".zh-fd-footer").height()-$(".am-fd-bottom").height();$(".zh-fd-list").height(r),$(".zh-loading-box").css({height:$(".zh-thead-fix").height()}),null!==flight_data_request&&flight_data_request.abort(),null!==flight_data_timer&&clearTimeout(flight_data_timer),-1!==cur_active.indexOf("all")&&(cur_active="in_0");o=$(".zh-opt-count li").eq(0).find("a").attr("type"),h="";if(void 0==cur_active?(cur_active="all_0",h="active"):-1!==cur_active.indexOf("in")&&(h="active"),-1==o.indexOf("in")){$(".zh-opt-count li").eq(0).remove();_='<li class="zh-xl '+h+'"><a type="in_0" href="###">进港：<span class=""></span></a><div class="zh-arrow"></div><div class="zh-dropdown"><div type="in_0" class="zh-item">全部进港</div><div type="in_1" class="zh-item">前站计划</div><div type="in_2" class="zh-item">前站起飞</div><div type="in_3" class="zh-item">到达本场</div> <div type="in_4" class="zh-item">预计停场</div> </div> </li><li class="zh-xl"><a type="out_0" href="###">出港：<span class=""></span></a><div class="zh-arrow"></div><div class="zh-dropdown"><div type="out_0" class="zh-item">全部出港</div><div type="out_1" class="zh-item">出港计划</div><div type="out_2" class="zh-item">出港已飞</div><div type="out_3" class="zh-item">始发航班</div></div></li>';$(".zh-opt-count").prepend(_)}}var f=$("#startTime"),u=f.val().split(" "),p=$("#endTime");if(0==i){var m="06:00",v="05:59",g=u[0]+" "+m,b=function(e,a){void 0!=a&&""!=a||(a=1),(e=new Date(e)).setDate(e.getDate()+a);var i=e.getMonth()+1,l=e.getDate();return e.getFullYear()+"-"+t(i)+"-"+t(l)}(u[0],1)+" "+v;f.val(g),p.val(b)}else if(1==i){m="00:00",v="23:59",g=u[0]+" "+m,b=u[0]+" "+v;f.val(g),p.val(b)}if(2==i&&""!==l&&""!==s){m=l.substr(0,2)+":"+l.substr(2,2),v=s.substr(0,2)+":"+s.substr(2,2),g=u[0]+" "+m,b=u[0]+" "+v;f.val(g),p.val(b)}d({init:1,pid:(new Date).getTime(),start_time:g,end_time:b,f_status:cur_active,list_type:V.list_type}),1==C?(flight_param={init:1,page_hash:PAGE_HASH,type:"depart"},y()):z()}},error:function(){}})},btn2:function(){},content:a,success:function(){$(".zh-draggable-list ul").each(function(){var t=$(this);t.dragsort({dragSelector:".draggable",placeHolderTemplate:'<li class="zh-dashed-box"></li>',scrollWrap:".layui-layer-content",offsetPrevIndex:0,dragStart:function(){setTimeout(function(){$(this).children(".zh-fd-checkbox").addClass("active");var t=$(this).parent().find(".zh-fd-checkbox:not(.zh-checkbox-all)").size();$(this).parent().find(".zh-fd-checkbox.active:not(.zh-checkbox-all)").size()==t&&$(this).parent().find(".zh-checkbox-all").addClass("active").children("input").attr("checked","checked")}.bind(this),110)},dragEnd:function(){t.children("li:not(:first)").each(function(t){$(this).children(".zh-num").text(++t)})}})})}}),$(".zh-news-panel dd").each(function(){$(this).hasClass("zh-draggable-list")?$(this).find(".zh-checkbox-all").size()>0&&$(this).find(".zh-fd-checkbox").size()-$(this).find(".zh-fd-checkbox.active").size()==1&&$(this).find(".zh-fd-checkbox:first").addClass("active"):$(this).children(".zh-checkbox-all").size()>0&&$(this).children(".zh-fd-checkbox").size()-$(this).children(".zh-fd-checkbox.active").size()==1&&$(this).children(".zh-fd-checkbox:first-child").addClass("active")})})}),$("body").on("click",".zh-input-close .zh-close",function(){$(this).siblings("input").val("")});$("#am_addFlightInfo").click(function(){layer.open({type:1,title:"<strong>新增航班信息</strong>",area:["710px","600px"],btn:["提交","取消"],yes:function(t,e){var a=$("input[name='fnum']").val();if(""==$.trim(a))return layer.msg("航班号不能为空！",{time:1e3}),!1;var i=$("input[name='city']").val();if(""==$.trim(i))return layer.msg("城市不能为空！",{time:1e3}),!1;var l=$("input[name='in_or_out']").val(),s=$("input[name='aircraft_num']").val();if(""==$.trim(s))return layer.msg("注册号不能为空！",{time:1e3}),!1;var n=$("input[name='parking']").val(),d=$("input[name='parking_type']").val(),c=$("input[name='Cla']").val();if(""==$.trim(c))return layer.msg("航班属性不能为空！",{time:1e3}),!1;var r=$("input[name='gate']").val(),o=$("input[name='baggage_turntable']").val(),h=$("input[name='flight_status_code']").val(),_=$("input[name='is_vip']").val(),f=$("input[name='scheduled_deptime_h']").val(),u=$("input[name='scheduled_deptime_y']").val();if(""==$.trim(f)||""==$.trim(u))return layer.msg("计划起飞时间不能为空！",{time:1e3}),!1;var p=$("input[name='scheduled_arrtime_h']").val(),m=$("input[name='scheduled_arrtime_y']").val();if(""==$.trim(p)||""==$.trim(m))return layer.msg("计划到达时间不能为空！",{time:1e3}),!1;var v=$("input[name='estimated_deptime_h']").val(),g=$("input[name='estimated_deptime_y']").val();if(""==$.trim(v)||""==$.trim(g))return layer.msg("预计起飞时间不能为空！",{time:1e3}),!1;var z=$("input[name='estimated_arrtime_h']").val(),b=$("input[name='estimated_arrtime_y']").val();if(""==$.trim(z)||""==$.trim(b))return layer.msg("预计到达时间不能为空！",{time:1e3}),!1;var y=$("input[name='actual_deptime_h']").val(),x=$("input[name='actual_deptime_y']").val(),k=$("input[name='actual_arrtime_h']").val(),w=$("input[name='actual_arrtime_y']").val(),C=$("input[name='aoc_info']").val(),T=layer.msg("提交中,请稍候...",{time:0}),A={fnum:a,city:i,in_or_out:l,aircraft_num:s,parking:n,parking_type:d,Cla:c,gate:r,baggage_turntable:o,flight_status_code:h,is_vip:_,scheduled_deptime_h:f,scheduled_deptime_y:u,scheduled_arrtime_h:p,scheduled_arrtime_y:m,estimated_deptime_h:v,estimated_deptime_y:g,estimated_arrtime_h:z,estimated_arrtime_y:b,actual_deptime_h:y,actual_deptime_y:x,actual_arrtime_h:k,actual_arrtime_y:w,aoc_info:C};$.ajax({type:"POST",dataType:"json",data:A,url:"/flight/flight_list/add_flight_info",success:function(e){layer.close(T),-1==e.code?layer.msg(e.msg,{time:1e3}):(layer.close(t),layer.msg("提交成功",{time:1e3}))},complete:function(t,e){null}})},content:'<div class="zh-edit-flight">\t\t\t\t\t\t\t\t\t<div class="zh-optbody" style="display: block;">\t\t\t\t\t\t\t\t\t\t<dl class="zh-news-panel">\t\t\t\t\t\t\t\t\t\t\t<dt>航班信息</dt>\t\t\t\t\t\t\t\t\t\t\t<dd>\t\t\t\t\t\t\t\t\t\t\t\t<ul class="zh-form-list2 clearfix">\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">航班号</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="fnum" class="zh-input zh-input-md zh-width-80" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">城市</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="city" class="zh-input zh-input-md zh-width-260" placeholder="请填写机场三字码" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">进/出港</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zh-fd-select" id="am_inOutSelect">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="zh-input zh-input-md zh-width-80" readonly="readonly" type="text" value="进港">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="in_or_out" type="hidden" value="0">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-sort="0" class="active">进港</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-sort="1">出港</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">注册号</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="aircraft_num" class="zh-input zh-input-md zh-width-80" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">机位</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="parking" class="zh-input zh-input-md zh-width-80" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">机型</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zh-fd-select">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="zh-input zh-input-md zh-width-80" readonly="readonly" type="text" value="C类">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="parking_type" type="hidden" value="C">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    <li data-sort="B" class="active">B类</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-sort="C" class="active">C类</li>                                                                <li data-sort="D">D类</li>                                                                <li data-sort="E">E类</li>                                                                <li data-sort="F">F类</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">航班属性</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zh-fd-select">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="zh-input zh-input-md zh-width-80" readonly="readonly" type="text" value="全部属性">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="Cla" type="hidden">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-sort="">全部属性</li>                                                                <li data-sort="H/Y">货运加班</li>                                                                <li data-sort="L/W">客班包机</li>                                                                <li data-sort="V/U">人工降雨</li>                                                                <li data-sort="T/W">地方航线</li>                                                                <li data-sort="Q/C">农林化</li>                                                                <li data-sort="P/F">放单不载客</li>                                                                <li data-sort="A/V">熟练</li>                                                                <li data-sort="R/W">日航</li>                                                                <li data-sort="Y/H">夜航</li>                                                                <li data-sort="D/Y">带飞</li>                                                                <li data-sort="M/X">鱼苗</li>                                                                <li data-sort="G/X">磁测</li>                                                                <li data-sort="B/F">播种</li>                                                                <li data-sort="X/D">护林</li>                                                                <li data-sort="Q/B">物理采矿</li>                                                                <li data-sort="X/L">训练</li>                                                                <li data-sort="X/F">校飞</li>                                                                <li data-sort="H/F">航摄</li>                                                                <li data-sort="X/P">森林巡逻</li>                                                                <li data-sort="S/E">施肥</li>                                                                <li data-sort="Q/T">其他运输飞机</li>                                                                <li data-sort="P/A">林业化学灭火</li>                                                                <li data-sort="N/B">农业播种</li>                                                                <li data-sort="D/C">航空调查</li>                                                                <li data-sort="F/J">校验飞行</li>                                                                <li data-sort="K/Y">空中游览</li>                                                                <li data-sort="L/B">林业播种</li>                                                                <li data-sort="O/F">救灾急救</li>                                                                <li data-sort="U/H">公务</li>                                                                <li data-sort="S/Q">视察飞行</li>                                                                <li data-sort="H/J">海岸检测</li>                                                                <li data-sort="H/Z">货运正班</li>                                                                <li data-sort="H/G">货运包机</li>                                                                <li data-sort="Z/P">客班补班</li>                                                                <li data-sort="Z/X">要客加班</li>                                                                <li data-sort="A/N">备降</li>                                                                <li class="active" data-sort="W/Z">客班正班</li>                                                                <li data-sort="C/B">普客加班</li>                                                                <li data-sort="K/L">本场训练</li>                                                                <li data-sort="N/M">调机</li>                                                                <li data-sort="B/W">专机</li>                                                                <li data-sort="W/A">转场</li>                                                                <li data-sort="R/Z">试航</li>                                                                <li data-sort="S/F">试飞</li>                                                                <li data-sort="O/M">军事运输</li>                                                                <li data-sort="Y/A">养调</li>                                                                <li data-sort="Q/U">换发飞行</li>                                                                <li data-sort="X/X">其它</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li id="am_inSelect">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">行李转盘</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="baggage_turntable" class="zh-input zh-input-md zh-width-80" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li id="am_outSelect" style="display:none;">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">登机口</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="gate" class="zh-input zh-input-md zh-width-80" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">航班状态</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zh-fd-select">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="zh-input zh-input-md zh-width-80" readonly="readonly" type="text" value="计划">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="flight_status_code" type="hidden" value="0">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-sort="0" class="active">计划</li>                                                                <li data-sort="1" >起飞</li>                                                                <li data-sort="2" >到达</li>                                                                <li data-sort="3" >取消</li>                                                                <li data-sort="4" >延误</li>                                                                <li data-sort="5" >备降</li>                                                                <li data-sort="11" >返航</li>                                                                <li data-sort="98" >非营运</li>                                                                <li data-sort="97" >返回停机位</li>                                                                <li data-sort="15" >可能备降</li>                                                                <li data-sort="32" >备降到达</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">VIP</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zh-fd-select">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="zh-input zh-input-md zh-width-80" readonly="readonly" type="text" value="否">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="is_vip" type="hidden" value="0">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-sort="1">是</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-sort="0" class="active">否</li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t</dd>\t\t\t\t\t\t\t\t\t\t</dl>\t\t\t\t\t\t\t\t\t\t<dl class="zh-news-panel">\t\t\t\t\t\t\t\t\t\t\t<dt>航班时刻</dt>\t\t\t\t\t\t\t\t\t\t\t<dd>\t\t\t\t\t\t\t\t\t\t\t\t<ul class="zh-form-list2 clearfix">\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">计划起飞</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="scheduled_deptime_h" class="zh-input zh-input-md zh-width-40" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="scheduled_deptime_y" class="zh-input zh-input-md zh-input-date zh-width-80" type="text" readonly="readonly" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">计划到达</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="scheduled_arrtime_h" class="zh-input zh-input-md zh-width-40" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="scheduled_arrtime_y" class="zh-input zh-input-md zh-input-date zh-width-80" type="text" readonly="readonly" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">预计起飞</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="estimated_deptime_h" class="zh-input zh-input-md zh-width-40" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="estimated_deptime_y" class="zh-input zh-input-md zh-input-date zh-width-80" type="text" readonly="readonly" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">预计到达</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="estimated_arrtime_h" class="zh-input zh-input-md zh-width-40" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="estimated_arrtime_y" class="zh-input zh-input-md zh-input-date zh-width-80" type="text" readonly="readonly" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">实际起飞</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="actual_deptime_h" class="zh-input zh-input-md zh-width-40" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="actual_deptime_y" class="zh-input zh-input-md zh-input-date zh-width-80" type="text" readonly="readonly" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-field-name">实际到达</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="actual_arrtime_h" class="zh-input zh-input-md zh-width-40" type="text" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="actual_arrtime_y" class="zh-input zh-input-md zh-input-date zh-width-80" type="text" readonly="readonly" value="">\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t</dd>\t\t\t\t\t\t\t\t\t\t</dl>\t\t\t\t\t\t\t\t\t\t<dl class="zh-news-panel">\t\t\t\t\t\t\t\t\t\t\t<dt>特情信息</dt>\t\t\t\t\t\t\t\t\t\t\t<dd>\t\t\t\t\t\t\t\t\t\t\t\t<div class="zh-input-close">\t\t\t\t\t\t\t\t\t\t\t\t\t<input name="aoc_info" class="zh-input zh-input-xmd" type="text" placeholder="请输入特情信息">\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zh-close"></span>\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t</dd>\t\t\t\t\t\t\t\t\t\t</dl>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>',success:function(){$("#am_inOutSelect li").on("click",function(){var t=$(this).attr("data-sort");"0"==t?($("#am_inSelect").show(),$("#am_outSelect").hide()):"1"==t&&($("#am_outSelect").show(),$("#am_inSelect").hide())})}})}),$("body").on("click",".zh-table .zh-edit",function(t){t.stopPropagation();var e=layer.msg("正在加载数据中,请稍候...",{time:0});if(void 0!==$(this).data("fid"))a=$(this).data("fid");else{var a=$(this).parent().parent().parent().children("td").eq(0).find("label").children("input").val();-1!==a.indexOf("_")&&(a=$(this).parents("td").data("fid"))}$.ajax({type:"GET",url:EDIT_FLIGHT_URL+"?fid="+a,success:function(t){layer.close(e);var i=0;try{$.parseJSON(t);i=1,show_no_permission()}catch(t){i=0}if(1===i)return!1;var l=layer.open({type:1,title:"<strong>编辑航班信息</strong>",area:["710px","600px"],btn:["提交","取消"],yes:function(t,e){var i=$("input[name='aircraft_num']").val(),s=$("input[name='parking']").val(),n=$("input[name='parking_type']").val(),d=$("input[name='Cla']").val(),c=$("input[name='baggage_turntable']").val(),r=$("input[name='gate']").val(),o=$("input[name='flight_status_code']").val(),h=$("input[name='is_vip']").val(),_=$("input[name='actual_deptime_h']").val(),f=$("input[name='actual_deptime_y']").val(),u=$("input[name='estimated_deptime_h']").val(),p=$("input[name='estimated_deptime_y']").val(),m=$("input[name='actual_arrtime_h']").val(),v=$("input[name='actual_arrtime_y']").val(),g=$("input[name='estimated_arrtime_h']").val(),z=$("input[name='estimated_arrtime_y']").val(),b=$("input[name='aoc_info']").val(),y=$.trim($("input[name='remark']").val()),x=$(".zh-first_depart .active").find("input").val();if($(".zh-del-flight .zh-fd-radio:first").hasClass("active")){var k=layer.confirm("确定要删除该航班？",{title:"<strong>删除提示</strong>"},function(){1,layer.close(k),layer.close(l);var e=layer.msg("正在删除，请耐心等待···",{time:0}),i={fid:a};$.ajax({type:"POST",dataType:"JSON",data:i,url:DEL_FLIGHT_URL,cache:!1,success:function(a){0==a.code?(layer.close(t),layer.close(e),layer.msg("删除成功....",{time:2e3})):(layer.close(t),layer.close(e),layer.msg(a.msg,{time:2e3}))}})});return!1}var w=$("input[name='first_reason']").val(),C=$("input[name='second_reason']").val(),T=$("input[name='reason_remark']").val(),A=(y=$("input[name='remark']").val(),$("input[name='adult_sale']").val()),S=$("input[name='children_sale']").val(),O=$("input[name='baby_sale']").val(),j=$("input[name='adult']").val(),q=$("input[name='children']").val(),I=$("input[name='baby']").val(),D=$("input[name='mail_weight']").val(),E=$("input[name='baggage_weight']").val(),L=$("input[name='goods_weight']").val(),H=$("input[name='in_or_out']").val(),G={aircraft_num:i,parking:s,parking_type:n,Cla:d,baggage_turntable:c,gate:r,flight_status_code:o,is_vip:h,actual_deptime_h:_,actual_deptime_y:f,estimated_deptime_h:u,estimated_deptime_y:p,actual_arrtime_h:m,actual_arrtime_y:v,estimated_arrtime_h:g,estimated_arrtime_y:z,aoc_info:b,first_reason:w,second_reason:C,reason_remark:T,remark:y,adult_sale:A,children_sale:S,baby_sale:O,adult:j,children:q,baby:I,mail_weight:D,baggage_weight:E,goods_weight:L,fid:a,in_or_out:H,is_first_depart_flight_for_airport:x,remark:y};$.ajax({type:"POST",dataType:"JSON",data:G,url:EDIT_FLIGHT_URL,cache:!1,success:function(e){0==e.code&&(layer.close(t),layer.msg("更新成功....",{time:2e3}))}})},btn2:function(){},content:t})}})}),$.customSelectFn(".am-delay-cause","input:not(:hidden)","ul","li",function(){var t=$(this),e=t.parents(".am-delay-cause"),a=$.trim(t.text());e.find(":hidden").val(t.data("reason")),e.is(".first")&&function(t,e,a){if(void 0!==e){var i="";e[0]instanceof Array||$.each(e,function(t,e){var a=e.name?e.name:e;i+='<li data-reason="'+t+'">'+a+"</li>"}),a&&($(t).find("input:text").val(e[Object.keys(e)[0]]),$(t).find("input:hidden").val(Object.keys(e)[0])),$(t).find("ul").html(i)}}(e.siblings(".am-delay-cause.second"),function t(e,a){var i={};return void 0!==e&&(""===a?i=e:$.each(e,function(e,l){l.name===a?i=l.sub:l.sub&&l.sub.length>0&&t(l.sub,a)})),i}(reasonObj,a),!0)}),$("body").on("mouseenter",".am-delay-cause input,.am-delay-cause li",function(){var t=$(this).val()?$(this).val():$(this).text();this.offsetWidth<this.scrollWidth&&layer.tips(t,this,{tips:[2,"#429EE5"],time:-1})}).on("mouseleave",".am-delay-cause input,.am-delay-cause li",function(){layer.closeAll("tips")}),$("body").on("click",".zh-edit-flight .zh-opt li",function(){$(this).addClass("active").siblings().removeClass("active"),$(".zh-edit-flight .zh-optbody").eq($(this).index()).show().siblings(".zh-optbody").hide()}),$("body").on("focus",".zh-edit-flight .zh-input-date",function(){$(this).datetimepicker({format:"yyyy/mm/dd",language:"zh-CN",weekStart:1,autoclose:!0,todayHighlight:1,startView:2,minView:2})}),$("body").on("click",".zh-fd-list .zh-table .zh-flight-number",function(){var t=layer.msg("正在加载数据中,请稍候...",{time:2e3}),e=$(this).parent().parent().parent().children("td").eq(0).find("label").children("input").val();-1!==e.indexOf("_")&&(e=$(this).data("fid")),$.get(GET_FLIGHT_DETAIL_URL+"?fid="+e,function(e){layer.close(t);var a=0;try{$.parseJSON(e);a=1,show_no_permission()}catch(t){a=0}if(1===a)return!1;layer.open({type:1,moveType:1,title:"<strong>航班详情</strong>",area:["1145px","560px"],content:e})})}),$("body").on("click",".soon_fnum",function(){var t=$(this).parent().attr("class").split("_")[1],e=layer.msg("正在加载数据中,请稍候...",{time:2e3});$.get(GET_FLIGHT_DETAIL_URL+"?fid="+t,function(t){layer.close(e);var a=0;try{$.parseJSON(t);a=1,show_no_permission()}catch(t){a=0}if(1===a)return!1;layer.open({type:1,moveType:1,title:"<strong>航班详情</strong>",area:["1145px","560px"],content:t})})}),$.ajax({type:"GET",dataType:"JSON",url:GET_SHORTCUT_URL,async:!1,success:function(t){SHORTCUT_PHRASE=t}});var e="";$.each(SHORTCUT_PHRASE,function(t,a){e+="<li>"+a+"</li>"}),$("body").on("click","#zhSendMsg, .zh-table .zh-msg",function(t){t.stopPropagation();var e=$(this).attr("type"),i=layer.msg("正在加载数据中,请稍候...",{time:0});if("no_flight"==e)var l=SHOW_MSG_DAILOG_URL+"?flag=1";else{if(void 0!==$(this).data("fid"))s=$(this).data("fid");else{var s=$(this).parent().parent("td").parent("tr").find("td:first").find("input").val();-1!==s.indexOf("_")&&(s=$(this).parents("td").data("fid"))}l=SHOW_MSG_DAILOG_URL+"?fid="+s}$.ajax({type:"GET",url:l,success:function(t){layer.close(i);var e=0;try{$.parseJSON(t);e=1,show_no_permission()}catch(t){e=0}if(1===e)return!1;var l=layer.open({type:1,title:"<strong>发送事务消息</strong>",area:["620px","580px"],btn:["提交","取消"],btn2:function(){},content:t,success:function(){!function(){var t,e,i=$(".zh-receive-box .zh-link-select"),l="",s="",n="";$.each(UNIT_INTERLOCK,function(a,i){s="first"+i.id,i.son&&(l+='<li data-attr="'+s+'" data-child="second0" class="allCheckLi"><label class="zh-unit-checkbox allCheck"><input type="checkbox"></label>全部分组</li>',$.each(i.son,function(a,i){n="second"+(a+1),t=i.id,e=i.name,l+='<li data-attr="'+s+'" data-child="'+n+'"><label class="zh-unit-checkbox"><input type="checkbox" data-id="'+t+'"></label>'+e+"</li>"}))}),l='<ul class="secondGroup" style="display:none;">'+l+"</ul>",$(".zh-receive-box").append(l);var d=localStorage.getItem("D_"+UID);if(null!==(d=JSON.parse(d))){var c=null!==d.firstJson?d.firstJson:"";"all"==c?$(".zh-firstUnit .zh-unit-checkbox").addClass("active").find("input").prop("checked",!0):c.length>0&&$.each(c,function(t,e){$('.zh-firstUnit li[data-attr="'+e+'"]').find(".zh-unit-checkbox").addClass("active").find("input").prop("checked",!0)});var r=null!==d.secondJson?d.secondJson:"";void 0!==r.first&&($(".zh-SecondUnit ul").html($(".secondGroup").find('li[data-attr="'+r.first+'"]').clone()),"all"==r.son?$(".zh-SecondUnit .zh-unit-checkbox").addClass("active").find("input").prop("checked",!0):r.son.length>0&&$.each(r.son,function(t,e){$('.zh-SecondUnit li[data-child="'+e+'"]').find(".zh-unit-checkbox").addClass("active").find("input").prop("checked",!0)})),$(".zh-thirdUnit ul").html(d.thirdNode)}$("body").on("click",".zh-receive-box li",function(){var t=$(this),e=t.parents(".zh-link-select");if(t.addClass("on").siblings().removeClass("on"),s=t.attr("data-attr"),0===e.index()&&void 0!==s){i.eq(1).find("ul").empty();var l=$(".secondGroup").find('li[data-attr="'+s+'"]').clone();i.eq(1).find("ul").html(l),t.find(".zh-unit-checkbox").hasClass("active")&&i.eq(1).find(".zh-unit-checkbox").addClass("active").find("input").prop("checked",!0)}a.secondJson={first:$(".zh-SecondUnit li").data("attr"),son:[]},$(".zh-SecondUnit .zh-unit-checkbox.active").each(function(){var t=$(this),e=t.parents("li");if(e.hasClass("allCheckLi"))return a.secondJson.son="all",!1;a.secondJson.son.push(e.data("child"))})}),$("body").on("click",".zh-receive-box .zh-unit-checkbox",function(t){t.stopPropagation(),t.preventDefault();var e=$(this),l=e.parent("li"),s=e.parents(".zh-link-select").index(),n="",d=l.attr("data-attr"),c=l.attr("data-child"),r="",n="",o="";if(e.hasClass("active"))e.removeClass("active").find(":checkbox").prop("checked",!1),e.is(".allCheck")?0==s?($(".zh-receive-box").find(".zh-unit-checkbox").removeClass("active").find(":checkbox").prop("checked",!1),i.eq(2).children("ul").empty()):1==s&&($(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".zh-unit-checkbox").removeClass("active").find(":checkbox").prop("checked",!1),i.eq(2).find('li[data-attr="'+d+'"]').remove()):0==s?($(".zh-receive-box").find('li[data-attr="'+d+'"] .zh-unit-checkbox').removeClass("active").find(":checkbox").prop("checked",!1),e.parents("ul").find(".allCheck").removeClass("active").find(":checkbox").prop("checked",!1),i.eq(2).find('li[data-attr="'+d+'"]').remove()):1==s?e.parents("ul").find(".zh-unit-checkbox.active:not(.allCheck)").size()<1?($(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".zh-unit-checkbox").removeClass("active").find(":checkbox").prop("checked",!1),i.eq(2).find('li[data-attr="'+d+'"]').remove()):($(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".allCheck").removeClass("active").find(":checkbox").prop("checked",!1),$(".zh-receive-box").find('li[data-attr="'+d+'"][data-child="'+c+'"]').find(".zh-unit-checkbox").removeClass("active").find(":checkbox").prop("checked",!1),i.eq(2).find('li[data-attr="'+d+'"][data-child="'+c+'"]').remove()):2==s&&(c?l.parent().find("li").size()<=1?(e.parents("ul").parent("li").remove(),$(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".zh-unit-checkbox").removeClass("active").find(":checkbox").prop("checked",!1)):($(".zh-receive-box").find('li[data-attr="'+d+'"][data-child="'+c+'"]').find(".zh-unit-checkbox").removeClass("active").find(":checkbox").prop("checked",!1),$(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".allCheck").removeClass("active").find(":checkbox").prop("checked",!1)):($(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".allCheck").removeClass("active").find(":checkbox").prop("checked",!1),$(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".zh-unit-checkbox").removeClass("active").find(":checkbox").prop("checked",!1)),l.remove(),i.eq(0).find("ul").find(".zh-unit-checkbox:not(.active,.allCheck)").size()>0&&i.eq(0).find("ul").find(".allCheck").removeClass("active").find(":checkbox").prop("checked",!1)),i.eq(2).find(":checkbox").val(function(){return $(this).attr("name","department[]"),$(this).attr("data-id")});else{if(e.addClass("active").find(":checkbox").prop("checked",!0),e.is(".allCheck"))if(0==s){i.eq(2).children("ul").empty(),$(".zh-receive-box").find(".zh-unit-checkbox").addClass("active").find(":checkbox").prop("checked",!0),r=i.eq(0).find("li:not(.allCheckLi)").clone();for(var h=0;h<r.length;h++)d=$(r[h]).attr("data-attr"),n=$(".secondGroup").find('li[data-attr="'+d+'"]:not(.allCheckLi)').clone(),$(r[h]).append("<ul></ul>"),$(r[h]).find("ul").append(n),o=r[h],i.eq(2).children("ul").append(o)}else i.eq(2).children("ul").find('li[data-attr="'+d+'"]').remove(),$(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".zh-unit-checkbox").addClass("active").find(":checkbox").prop("checked",!0),n=$(".secondGroup").find('li[data-attr="'+d+'"]:not(.allCheckLi)').clone(),(o=i.eq(0).find('li[data-attr="'+d+'"]').clone()).append("<ul></ul>"),o.find("ul").append(n),i.eq(2).children("ul").append(o);else 0==s?($(".zh-receive-box").find('li[data-attr="'+d+'"] .zh-unit-checkbox').addClass("active").find(":checkbox").prop("checked",!0),e.parents("ul").find(".zh-unit-checkbox:not(.active):not(.allCheck)").size()<1&&e.parents("ul").find(".allCheck").addClass("active").find(":checkbox").prop("checked",!0),n=$(".secondGroup").find('li[data-attr="'+d+'"]:not(.allCheckLi)').clone(),(o=l.clone()).append("<ul></ul>"),o.find("ul").append(n),i.eq(2).children("ul").append(o)):1==s&&($(".zh-receive-box").find('li[data-attr="'+d+'"]:not([data-child])').find(".zh-unit-checkbox").addClass("active").find(":checkbox").prop("checked",!0),$(".zh-receive-box").find('li[data-attr="'+d+'"][data-child="'+c+'"]').find(".zh-unit-checkbox").addClass("active").find(":checkbox").prop("checked",!0),e.parents("ul").find(".zh-unit-checkbox:not(.active,.allCheck)").size()<1&&$(".zh-receive-box").find('li[data-attr="'+d+'"]').find(".allCheck").addClass("active").find(":checkbox").prop("checked",!0),n=$(".secondGroup").find('li[data-attr="'+d+'"][data-child="'+c+'"]').clone(),e.parents("ul").find(".active:not(.allCheck)").size()<=1?(r=i.eq(0).find('li[data-attr="'+d+'"]'),(o=r.clone()).append("<ul></ul>"),o.find("ul").append(n),i.eq(2).children("ul").append(o)):(o=n,i.eq(2).find('li[data-attr="'+d+'"] > ul').append(o)));i.eq(2).find(":checkbox").val(function(){return $(this).attr("name","department[]"),$(this).attr("data-id")})}a.firstJson=[],$(".zh-firstUnit .zh-unit-checkbox.active").each(function(){var t=$(this),e=t.parents("li");if(e.hasClass("allCheckLi"))return a.firstJson="all",!1;a.firstJson.push(e.data("attr"))}),a.secondJson={first:$(".zh-SecondUnit li").data("attr"),son:[]},$(".zh-SecondUnit .zh-unit-checkbox.active").each(function(){var t=$(this),e=t.parents("li");if(e.hasClass("allCheckLi"))return a.secondJson.son="all",!1;a.secondJson.son.push(e.data("child"))}),a.thirdNode=$(".zh-thirdUnit .zh-selected-list").html()})}()},yes:function(){var t=[];$("input[name='department[]']").each(function(){$(this).parent().hasClass("active")&&""!=$(this).val()&&t.push($(this).val())}),t=t.join(",");var e=$("textarea[name='content']").val(),i=$("input[name='msg_type']:checked").val(),s="",n=$("input[name='fid']:checked").val();if(void 0==n&&(n=0),1==i){var d=$(".zh-is-confirm").find(".active").children("input").val();s=SEND_FEEDBACK_URL;var c={dpt_ids:t,fid:n,content:e,need_confirm:d},r=$(".zh-receive-box .zh-unit-checkbox.active").size(),o=$.trim($(".zh-sendmsg-box textarea").val());if(r<1&&""==o)return layer.msg("接收单位不能为空",{time:1e3}),!1;if(r<1)return layer.msg("请选择接收单位",{time:1e3}),!1;if(""==o)return layer.msg("信息内容不能为空",{time:1e3}),!1}else{s=SEND_ANNOUCEMENT_URL;c={content:$("textarea[name='content_info']").val()};if(""==$.trim($("textarea[name='content_info']").val()))return layer.msg("信息内容不能为空",{time:1e3}),!1}localStorage.setItem("D_"+UID,JSON.stringify(a)),$.ajax({type:"POST",dataType:"JSON",data:c,url:s,cache:!1,timeout:6e4,success:function(t){0==t.code&&layer.msg("发送成功")},error:function(){}}),layer.close(l)},end:function(){$("body").off("click",".zh-receive-box li"),$("body").off("click",".zh-receive-box .zh-unit-checkbox")}})}})}),$("body").on("click",".zh-send-type .zh-fd-radio",function(){"信息通告"===$.trim($(this).text())?($(this).parents(".zh-news-panel").siblings().not(".zh-info-edit").hide(),$(this).parents(".zh-news-panel").siblings(".zh-info-edit").show()):($(this).parents(".zh-news-panel").siblings().show(),$(this).parents(".zh-news-panel").siblings(".zh-info-edit").hide())}),$("body").on("click",".zh-flight-type .zh-fd-radio",function(){var t=$(this).find("input").val(),e=$("textarea[name='content']");if(0==t)e.val("");else if(""==e.val()){var a=$("input[name='msg_flight']").val();e.val(a)}});var a={firstJson:[],secondJson:{first:"",son:""},thirdNode:""};$("body").on("input",".zh-sendmsg-box .zh-form input",function(){var t=$(this);if(""===t.val())t.parents(".zh-heading").siblings("ul").html(e);else{var a="";$.each(SHORTCUT_PHRASE,function(e,i){new RegExp(t.val(),"g").test(i)&&(a+="<li>"+i+"</li>")}),t.parents(".zh-heading").siblings("ul").html(a)}}),$("body").on("dblclick",".zh-sendmsg-box ul li",function(){if($(this).hasClass("active")){$(this).removeClass("active");var t=$(".zh-sendmsg-box textarea").val().replace($(this).text(),"");$(".zh-sendmsg-box textarea").val(t)}else{$(this).addClass("active");var e=$(".zh-sendmsg-box textarea").val()+$(this).text();$(".zh-sendmsg-box textarea").val(e)}});var i="";$(".importFlightNumber input").on("change",function(){var t=$(this).val();if("csv"!=t.slice(t.lastIndexOf(".")+1).toLowerCase())return layer.open({type:1,title:"<strong>导入机位提示</strong>",area:["300px","220px"],content:'<p class="am_importInfo"><span class="error">导入失败!</span><br/>导入的文件格式不正确，需csv格式</p>',btn:["确认"]}),!1;var e=document.getElementById("file").files[0],a=new FileReader;a.readAsText(e,"gb2312"),a.onload=function(e){var a=e.target.result;$("#file").val("");var l=layer.msg("正在导入，请耐心等待···",{time:0});$.ajax({type:"POST",dataType:"json",data:{path:t,text:a},url:IMPORT_PARKING_URL,success:function(t){i=0==t.code?'<p class="am_importInfo"><span class="success">导入成功!</span><br/>已成功导入<strong>'+t.num+"</strong>条"+t.type+"机位数据</p>":'<p class="am_importInfo"><span class="error">导入失败!</span><br/>'+t.msg+"</p>",layer.close(l),layer.open({type:1,title:"<strong>导入机位提示</strong>",area:["300px","220px"],content:i,btn:["确认"]})}})}});var l="";$(".importFlightFood input").on("change",function(){if("undefined"==typeof Worker)return layer.open({type:1,title:"<strong>导入航食计划提示</strong>",area:["300px","100px"],content:'<p class="am_importInfo">此浏览器版本不支持此功能,请升级浏览器</p>'}),!1;if(0==IMPORT_FOOD_PERMISSION)return show_no_permission(),!1;var t=$(this).val();if("xls"!=t.slice(t.lastIndexOf(".")+1).toLowerCase())return layer.open({type:1,title:"<strong>导入航食计划提示</strong>",area:["300px","220px"],content:'<p class="am_importInfo"><span class="error">导入失败!</span><br/>导入的文件格式不正确，需xls格式</p>',btn:["确认"]}),!1;var e=document.getElementById("file2").files[0],a=new FileReader;a.readAsDataURL(e),a.onload=function(t){var e=new FormData;e.append("upload",1),e.append("upfile",$("#file2").get(0).files[0]);var a=layer.msg("正在导入，请耐心等待···",{time:0});$.ajax({type:"POST",data:e,url:"/flight/flight_list/import_fresh_air_plan",success:function(t){t=$.parseJSON(t);l=0==t.code?'<p class="am_importInfo"><span class="success">导入成功!</span><br/>已成功导入<strong>'+t.num+"</strong>条航食计划数据</p>":'<p class="am_importInfo"><span class="error">导入失败!</span><br/>'+t.msg+"</p>",layer.close(a),layer.open({type:1,title:"<strong>导入航食计划提示</strong>",area:["300px","220px"],content:l,btn:["确认"]}),$("#file2").val("")},cache:!1,contentType:!1,processData:!1})}}),$(".am-custom-export").on("click",function(){if(0==EXPORT_FLIGHT_PERMISSION)return show_no_permission(),!1;var t=layer.msg("正在加载中,请稍候...",{time:0});$.get("/flight/flight_export/get_export_html",function(e){layer.close(t),layer.open({type:1,title:"<strong>自定义导出</strong>",area:["900px","545px"],content:e,btn:["确认"],success:function(){$("#startDate,#endDate").datetimepicker({format:"yyyy-mm-dd",language:"zh-CN",weekStart:1,autoclose:!0,todayHighlight:1,startView:2,minView:2,forceParse:0})},yes:function(t,e){layer.msg("正在导出数据中,请稍候...",{time:0});!function t(e,a){a.day=e,$.get("/flight/flight_export/index",a,function(i){0==i.code?(layer.msg(i.msg,{time:0}),t(++e,a)):1==i.code&&(layer.msg(i.msg),window.location.href=i.file_url)},"JSON")}(1,function(){var t=$("input[name='apron']").val(),e=$("input[name='area']").val(),a=$("input[name='export_type']").val(),i=$("#startDate").val(),l=$("#endDate").val(),s=$("input[name='export_time_range']").val();if(1==s)var n=$("input[name='export_start_hour']").val(),d=$("input[name='export_end_hour']").val();var c=$("input[name='export_in_or_out']:checked").val(),r=[];$(".zh-export-in-field>label.active").each(function(t){if("全选"==$(this).text())return!0;r.push($(this).data("id"))});var o=[];$(".zh-export-out-field>label.active").each(function(t){if("全选"==$(this).text())return!0;o.push($(this).data("id"))});var h=[];$(".zh-export-node-list-field>label.active").each(function(t){h.push($(this).data("id"))});var _=[];$(".zh-export-cargo-field>label.active").each(function(t){_.push($(this).data("id"))});var f=[];return $(".zh-export-passenger-field>label.active").each(function(t){f.push($(this).data("id"))}),{rand_num:parseInt(1e5*Math.random()+100),apron:t,area:e,export_type:a,startDate:i,endDate:l,export_time_range:s,export_start_hour:n,export_end_hour:d,export_in_or_out:c,export_in_field:r,export_out_field:o,export_node_list_field:h,export_cargo_field:_,export_passenger_field:f}}())}})})})}function a(e,a,i){var l=a.f_status,s="";if("all"!==(s=-1!==l.indexOf("in")?"in":-1!==l.indexOf("out")?"out":-1!==l.indexOf("all")?"all":-1!==l.indexOf("food")?"food":l)){var n=[],d="",c="",r="",o="";if(rt=p(l+"_attr_cookie")){(mt=[]).f_attr_0="",mt.f_attr_0_active="",$.each(f_attr_json,function(t,e){mt["f_attr_"+ ++t]="",mt["f_attr_"+t+"_active"]=""});var h="",_="",f="",u="",m="",v="",g="",z="",b="",y="",x="",k="",w="",C="",T="",A="",S="",O="",j="",q="",I="",D="",E="",L="",H="",G="",R="",F="",P="",U="",M="",N="",J=(n=rt.split("|"))[0];if(0!=J){d="red";var V=J.split(",");$.each(f_attr_json,function(t,e){t++,$.inArray(t.toString(),V)>-1&&(mt["f_attr_"+t]="checked='checked'",mt["f_attr_"+t+"_active"]="active")})}else mt.f_attr_0="checked='checked'",mt.f_attr_0_active="active";var W=n[1];0!=W?(c="red",1==W?(f="checked='checked'",u="active"):(m="checked='checked'",v="active")):(h="checked='checked'",_="active");var X=n[2];if(0!=X){r="red";var Y=X.split(",");$.inArray("1",Y)>-1&&(b="checked='checked'",y="active"),$.inArray("2",Y)>-1&&(x="checked='checked'",k="active"),$.inArray("3",Y)>-1&&(w="checked='checked'",C="active"),$.inArray("4",Y)>-1&&(T="checked='checked'",A="active"),$.inArray("5",Y)>-1&&(S="checked='checked'",O="active"),$.inArray("6",Y)>-1&&(j="checked='checked'",q="active"),$.inArray("7",Y)>-1&&(I="checked='checked'",D="active"),$.inArray("8",Y)>-1&&(E="checked='checked'",L="active"),$.inArray("9",Y)>-1&&(H="checked='checked'",G="active")}else g="checked='checked'",z="active";if(0!=(xe=n[9])){o="red";var B=xe.split(",");$.inArray("1",B)>-1&&(P="checked='checked'",U="active"),$.inArray("2",B)>-1&&(M="checked='checked'",N="active")}else R="checked='checked'",F="active";var Q='<li><label class="zh-fd-checkbox flight_attribute '+mt.f_attr_0_active+'"><input name="f_attr[]" type="checkbox" value="0" '+mt.f_attr_0+">全部属性</label></li>";$.each(f_attr_json,function(t,e){Q+='<li><label class="zh-fd-checkbox flight_attribute '+mt["f_attr_"+ ++t+"_active"]+'"><input name="f_attr[]" type="checkbox" value="'+t+'" '+mt["f_attr_"+t]+">"+e+"</label></li>"});var K='<li><label class="zh-fd-checkbox flight_vip '+_+'"><input name="f_vip[]" type="checkbox" value="0" '+h+">全部航班</label></li>";K+='<li><label class="zh-fd-checkbox flight_vip '+u+'"><input name="f_vip[]" type="checkbox" value="1" '+f+">普通航班</label></li>",K+='<li><label class="zh-fd-checkbox flight_vip '+v+'"><input name="f_vip[]" type="checkbox" value="2" '+m+">要客航班</label></li>";var Z='<li><label class="zh-fd-checkbox flight_status_code '+z+'"><input name="f_status_code[]" value="0" type="checkbox" '+g+">全部</label></li>";Z+='<li><label class="zh-fd-checkbox flight_status_code '+y+'"><input name="f_status_code[]" type="checkbox" value="1" '+b+">计划</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+k+'"><input name="f_status_code[]" type="checkbox" value="2" '+x+">起飞</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+C+'"><input name="f_status_code[]" type="checkbox" value="3" '+w+">到达</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+A+'"><input name="f_status_code[]" type="checkbox" value="4" '+T+">延误</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+O+'"><input name="f_status_code[]" type="checkbox" value="5" '+S+">取消</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+q+'"><input name="f_status_code[]" type="checkbox" value="6" '+j+">备降</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+D+'"><input name="f_status_code[]" type="checkbox" value="7" '+I+">滑回</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+L+'"><input name="f_status_code[]" type="checkbox" value="8" '+E+">返航</label></li>",Z+='<li><label class="zh-fd-checkbox flight_status_code '+G+'"><input name="f_status_code[]" type="checkbox" value="9" '+H+">非营运</label></li>";var tt='<li><label class="zh-fd-checkbox release '+F+'"><input name="f_release_situation[]" type="checkbox" value="0" '+R+">全部</label></li>";tt+='<li><label class="zh-fd-checkbox release '+U+'"><input name="f_release_situation[]" type="checkbox" value="1" '+P+">正常</label></li>",tt+='<li><label class="zh-fd-checkbox release '+N+'"><input name="f_release_situation[]" type="checkbox" value="2" '+M+">延误</label></li>"}else{Q='<li><label class="zh-fd-checkbox flight_attribute  active"><input name="f_attr[]" type="checkbox" value="0" checked="checked">全部属性</label></li>';$.each(f_attr_json,function(t,e){Q+='<li><label class="zh-fd-checkbox flight_attribute "><input name="f_attr[]" type="checkbox" value="'+ ++t+'">'+e+"</label></li>"});K='<li><label class="zh-fd-checkbox flight_vip active"><input name="f_vip[]" type="checkbox" value="0" checked="checked">全部航班</label></li>';K+='<li><label class="zh-fd-checkbox flight_vip"><input name="f_vip[]" type="checkbox" value="1">普通航班</label></li>',K+='<li><label class="zh-fd-checkbox flight_vip"><input name="f_vip[]" type="checkbox" value="2">要客航班</label></li>';Z='<li><label class="zh-fd-checkbox flight_status_code active"><input name="f_status_code[]" value="0" type="checkbox" checked="checked">全部</label></li>';Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="1">计划</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="2">起飞</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="3">到达</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="4">延误</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="5">取消</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="6">备降</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="7">滑回</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="8">返航</label></li>',Z+='<li><label class="zh-fd-checkbox flight_status_code"><input name="f_status_code[]" type="checkbox" value="9">非营运</label></li>';tt='<li><label class="zh-fd-checkbox release active"><input name="f_release_situation[]" type="checkbox" value="0" checked="checked">全部</label></li>';tt+='<li><label class="zh-fd-checkbox release"><input name="f_release_situation[]" type="checkbox" value="1">正常</label></li>',tt+='<li><label class="zh-fd-checkbox release"><input name="f_release_situation[]" type="checkbox" value="2">延误</label></li>'}var et="",at="",it="",lt="",st="",nt="";"scheduled_deptime"==a.order_field?et="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"estimated_deptime"==a.order_field?at="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"actual_deptime"==a.order_field?it="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"scheduled_arrtime"==a.order_field?lt="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"estimated_arrtime"==a.order_field?st="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"actual_arrtime"==a.order_field&&(nt="ASC"==a.order_type?"zh-order-asc":"zh-order-desc");var dt="<tr>";dt+='<th><div class="zh-cell-wrap">关注</div></th>',$.each(i[s],function(t,e){"in_cla"==field_config[s][e].name||"out_cla"==field_config[s][e].name||"cla"==field_config[s][e].name?dt+="meet"==s?' <th><div class="zh-cell-wrap"><span class="zh-field-name '+d+'">属性</span></div></th>':' <th><div class="zh-cell-wrap"><span class="zh-field-name '+d+'">属性</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown"><ul class="zh-fd-scrollbar3">'+Q+"</ul></div></div></th>":"in_fnum"==field_config[s][e].name||"out_fnum"==field_config[s][e].name?"meet"==s?dt+='<th><div class="zh-cell-wrap"><span class="zh-field-name">'+field_config[s][e].cn_name+"</span></div></th>":"in"==s&&"in_fnum"==field_config[s][e].name?dt+='<th><div class="zh-cell-wrap"><span class="zh-field-name '+c+'">'+field_config[s][e].cn_name+'</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown"><ul>'+K+"</ul></div></div></th>":"out"==s&&"out_fnum"==field_config[s][e].name?dt+='<th><div class="zh-cell-wrap"><span class="zh-field-name '+c+'">'+field_config[s][e].cn_name+'</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown"><ul>'+K+"</ul></div></div></th>":dt+='<th><div class="zh-cell-wrap"><span class="zh-field-name">'+field_config[s][e].cn_name+"</span></div></th>":"in_flight_status_code"==field_config[s][e].name||"out_flight_status_code"==field_config[s][e].name||"flight_status_code"==field_config[s][e].name?dt+="meet"==s?'<th><div class="zh-cell-wrap"><span class="zh-field-name '+r+'">状态</span></div></th>':'<th><div class="zh-cell-wrap"><span class="zh-field-name '+r+'">状态</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown zh-width-80"><ul class="zh-fd-scrollbar3">'+Z+"</ul></div></div></th>":"release_situation"==field_config[s][e].name?dt+=' <th><div class="zh-cell-wrap"><span class="zh-field-name '+o+'">放行情况</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown zh-width-80"><ul class="zh-fd-scrollbar3">'+tt+"</ul></div></div></th>":"in_scheduled_deptime"==field_config[s][e].name||"out_scheduled_deptime"==field_config[s][e].name||"scheduled_deptime"==field_config[s][e].name?dt+='<th class="zh-order"><div class="zh-cell-wrap"><span title="计划起飞时间" class="zh-field-name">计飞</span> <span class="zh-icon-order '+et+'" order_field="scheduled_deptime"></span></div></th>':"in_estimated_deptime"==field_config[s][e].name||"estimated_deptime"==field_config[s][e].name||"out_estimated_deptime"==field_config[s][e].name?dt+='<th class="zh-order"><div class="zh-cell-wrap"><span title="预计起飞时间" class="zh-field-name">预飞(F)</span> <span class="zh-icon-order '+at+'" order_field="estimated_deptime"></span></div></th>':"in_actual_deptime"==field_config[s][e].name||"actual_deptime"==field_config[s][e].name||"out_actual_deptime"==field_config[s][e].name?dt+='<th class="zh-order"><div class="zh-cell-wrap"><span title="实际起飞时间" class="zh-field-name">实飞</span> <span class="zh-icon-order '+it+'" order_field="actual_deptime"></span></div></th>':"in_scheduled_arrtime"==field_config[s][e].name||"scheduled_arrtime"==field_config[s][e].name||"out_scheduled_arrtime"==field_config[s][e].name?dt+='<th class="zh-order"><div class="zh-cell-wrap"><span title="计划到达时间" class="zh-field-name">计达</span> <span class="zh-icon-order '+lt+'" order_field="scheduled_arrtime"></span></div></th>':"in_estimated_arrtime"==field_config[s][e].name||"estimated_arrtime"==field_config[s][e].name||"out_estimated_arrtime"==field_config[s][e].name?dt+='<th class="zh-order"><div class="zh-cell-wrap"><span title="预计到达时间" class="zh-field-name">预达(F)</span> <span class="zh-icon-order '+st+'" order_field="estimated_arrtime"></span></div></th>':"in_actual_arrtime"==field_config[s][e].name||"actual_arrtime"==field_config[s][e].name||"out_actual_arrtime"==field_config[s][e].name?dt+='<th class="zh-order"><div class="zh-cell-wrap"><span title="实际到达时间" class="zh-field-name">实达</span> <span class="zh-icon-order '+nt+'" order_field="actual_arrtime"></span></div></th>':dt+='<th><div class="zh-cell-wrap"><span class="zh-field-name">'+field_config[s][e].cn_name+"</span></div></th>"}),dt+='<th><div class="zh-cell-wrap"><span class="zh-field-name">操作</span></div></th></tr>';$(".flight-list-table thead").html(dt);var ct="";$.each(e,function(e,a){var l="",n="";1===a.is_attention&&(l="checked='checked'",n="active");var d="";"1"===a.in_is_vip&&(d='<span class="zh-vip-yellow">V</span>');var c="";"1"===a.out_is_vip&&(c='<span class="zh-vip-black">V</span>');var r="";void 0!==a.is_vip&&"1"==a.is_vip&&void 0!==a.in_flag&&(r=1==a.in_flag?'<span class="zh-vip-yellow">V</span>':'<span class="zh-vip-black">V</span>');var o="";1==a.in_is_meeting&&(o='<span class="zh-vip-yellow">M</span>');var h="";1==a.out_is_meeting&&(h='<span class="zh-vip-black">M</span>');var _="";void 0!==a.is_meeting&&1==a.is_meeting&&void 0!==a.in_flag&&(_=1==a.in_flag?'<span class="zh-vip-yellow">M</span>':'<span class="zh-vip-black">M</span>');var f="",u="";void 0!==a[u="in"==s?"in_flight_status_code":"out"==s?"out_flight_status_code":"flight_status_code"]&&("到达"==a[u]?f="zh-bg-blue":"起飞"==a[u]?f="zh-bg-green":"延误"==a[u]?f="zh-bg-yellow":-1!==$.inArray(a[u],["备降","正在备降","返航","正在返航","取消"])&&(f="zh-bg-red"));var p="",m="",v="",g="",z="",b="",y="",x="",k="",w='class="zh-tip-share"',C="",T="",A="";void 0!==a.in_share_flight_string&&""!==a.in_share_flight_string&&(p="共享:"+a.in_share_flight_string,y="zh-text-black-bold"),void 0!==a.in_virtual_flight_string&&""!==a.in_virtual_flight_string&&(v=" 虚拟:"+a.in_virtual_flight_string,y="zh-text-black-bold"),""===p&&""===v||(C+=w+'data-share="'+p+v+'"'),void 0!==a.out_share_flight_string&&""!==a.out_share_flight_string&&(m="共享:"+a.out_share_flight_string,x="zh-text-black-bold"),void 0!==a.out_virtual_flight_string&&""!==a.out_virtual_flight_string&&(g+=" 虚拟:"+a.out_virtual_flight_string,x="zh-text-black-bold"),""===m&&""===g||(T+=w+'data-share="'+m+g+'"'),void 0!==a.share_flight_string&&""!==a.share_flight_string&&(z="共享:"+a.share_flight_string,k="zh-text-black-bold"),void 0!==a.virtual_flight_string&&""!==a.virtual_flight_string&&(b=" 虚拟:"+a.virtual_flight_string,k="zh-text-black-bold"),""===z&&""===b||(A+=w+'data-share="'+z+b+'"');var S=a.second_state,O="",j="";1==a.es_arr_time_adsb&&(j='<i class="am-icon-A">A</i>'),1==a.es_dep_time_adsb&&(O='<i class="am-icon-A">A</i>');var q="";1==a.is_delay_flight&&(q="delay"),ct+='<tr class="'+q+" "+f+'" data-flight-date="'+a.flight_date+'" id="flight_list_'+e+'">',ct+='<td><div class="zh-cell-wrap"><label class="zh-fd-checkbox attention_id '+n+'"><input class="attention_flight" type="checkbox" name="attention" value="'+a.fid+'" '+l+">"+a.id+"</label></div></td>";var I=["in_scheduled_deptime","in_estimated_deptime","in_actual_deptime","in_scheduled_arrtime","in_estimated_arrtime","in_actual_arrtime","out_scheduled_deptime","out_estimated_deptime","out_actual_deptime","out_scheduled_arrtime","out_estimated_arrtime","out_actual_arrtime","scheduled_deptime","estimated_deptime","actual_deptime","scheduled_arrtime","estimated_arrtime","actual_arrtime","cobt","ctot"];$.each(i[s],function(e,i){if("in_fnum"==field_config[s][i].name)ct+="<td "+C+'><div class="zh-cell-wrap"><a class="zh-field-value zh-flight-number '+y+'" href="###">'+a[field_config[s][i].name]+"</a>"+d+o+"</div></td>";else if("out_fnum"==field_config[s][i].name)ct+="<td "+T+'><div class="zh-cell-wrap"><a class="zh-field-value zh-flight-number zh-text-gray2 '+x+'" href="###">'+a[field_config[s][i].name]+"</a>"+c+h+"</div></td>";else if("fnum"==field_config[s][i].name)ct+="<td "+A+'><div class="zh-cell-wrap"><a class="zh-field-value zh-flight-number zh-text-gray2 '+k+'" href="###">'+a[field_config[s][i].name]+"</a>"+r+_+"</div></td>";else if("airport_lines"==field_config[s][i].name)ct+='<td class="zh-tip-share" data-share="'+a[field_config[s][i].name]+'"><div class="zh-cell-wrap"><a class="zh-field-value zh-airline" href="###">'+t(a[field_config[s][i].name])+"</a></div></td>";else if("in_flight_status_code"==field_config[s][i].name||"out_flight_status_code"==field_config[s][i].name||"flight_status_code"==field_config[s][i].name)ct+='<td><div class="zh-cell-wrap"><span class="zh-field-value">'+a[field_config[s][i].name]+"</span> "+S+"</div></td>";else if("process_status"==field_config[s][i].name)ct+='<td title="'+a.process_time+'"><div class="zh-cell-wrap"><a target="_blank" href="'+a.process_detail_link+'" class="zh-field-value">'+a[field_config[s][i].name]+"</a></div></td>";else if("aircraft_num"==field_config[s][i].name)ct+='<td><div class="zh-cell-wrap"><a data-aircraft-type="'+a.aircraft_type+'" class="zh-field-value zh-plane-number" href="###">'+a[field_config[s][i].name]+"</a></div></td>";else if("in_parking"==field_config[s][i].name||"out_parking"==field_config[s][i].name)ct+='<td><div class="zh-cell-wrap">'+a[field_config[s][i].name]+"</div></td>";else if("aircraft_type"==field_config[s][i].name)ct+='<td class="am-plane-type"><div class="zh-cell-wrap"><span class="zh-field-value zh-plane-type"><i>'+a[field_config[s][i].name]+"</i></span></div></td>";else if(-1!==field_config[s][i].name.indexOf("estimated_deptime")&&-1==field_config[s][i].name.indexOf("isd"))ct+='<td><div class="zh-cell-wrap">'+O+'<input data-field-val="'+a[field_config[s][i].name]+'" data-field="'+field_config[s][i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s][i].name]+'" type="text"></div></td>';else if(-1!==field_config[s][i].name.indexOf("estimated_arrtime")&&-1==field_config[s][i].name.indexOf("isd"))ct+='<td><div class="zh-cell-wrap">'+j+'<input data-field-val="'+a[field_config[s][i].name]+'" data-field="'+field_config[s][i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s][i].name]+'" type="text"></div></td>';else if(-1!==$.inArray(field_config[s][i].name,I))ct+='<td><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[s][i].name]+'" data-field="'+field_config[s][i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s][i].name]+'" type="text"></div></td>';else if("aoc_info"==field_config[s][i].name)ct+='<td><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[s][i].name]+'" data-field="'+field_config[s][i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s][i].name]+'" type="text"></div></td>';else if("release_situation"==field_config[s][i].name)ct+='<td class="zh-bg-bgray"><div class="zh-cell-wrap">'+a.release_situation+a.release_situation_time+"</div></td>";else if("turnaround_time"==field_config[s][i].name)if(""==a.turnaround_time)ct+='<td><div class="zh-cell-wrap"><span class="zh-field-value "></span></div></td>';else{var l=a.turnaround_time;-1!=l.indexOf("+")?ct+='<td class="am-font-red"><div class="zh-cell-wrap"><span class="zh-field-value ">'+l+"</span></div></td>":ct+='<td><div class="zh-cell-wrap"><span class="zh-field-value ">'+l+"</span></div></td>"}else ct+='<td><div class="zh-cell-wrap"><span class="zh-field-value ">'+a[field_config[s][i].name]+"</span></div></td>"}),ct+='<td class="show_fid"><div class="zh-cell-wrap"><a class="zh-field-value zh-edit" href="###">编辑</a><a class="zh-field-value zh-msg zh-ml-5" href="###">消息</a></div></td></tr>'}),$(".flight-list-table tbody").html(ct)}else{var rt,ot="",ht="",_t="",ft="",ut="",pt="";o="",n=[];if(rt=p(l+"_attr_cookie")){var mt;(mt=[]).in_f_attr_0="",mt.in_f_attr_0_active="",$.each(f_attr_json,function(t,e){mt["in_f_attr_"+ ++t]="",mt["in_f_attr_"+t+"_active"]=""});var vt="",gt="",zt="",bt="",$t="",yt="",xt="",kt="",wt="",Ct="",Tt="",At="",St="",Ot="",jt="",qt="",It="",Dt="",Et="",Lt="",Ht="",Gt="",Rt="",Ft="",Pt="",Ut="";mt.out_f_attr_0="",mt.out_f_attr_0_active="",$.each(f_attr_json,function(t,e){mt["out_f_attr_"+ ++t]="",mt["out_f_attr_"+t+"_active"]=""});var Mt="",Nt="",Jt="",Vt="",Wt="",Xt="",Yt="",Bt="",Qt="",Kt="",Zt="",te="",ee="",ae="",ie="",le="",se="",ne="",de="",ce="",re="",oe="",he="",_e="",fe="",ue="",pe=(R="",F="",P="",U="",M="",N="",(n=rt.split("|"))[3]);if(0!=pe){ot="red";var me=pe.split(",");$.each(f_attr_json,function(t,e){t++,$.inArray(t.toString(),me)>-1&&(mt["in_f_attr_"+t]="checked='checked'",mt["in_f_attr_"+t+"_active"]="active")})}else mt.in_f_attr_0="checked='checked'",mt.in_f_attr_0_active="active";var ve=n[4];0!=ve?(_t="red",1==ve?(zt="checked='checked'",bt="active"):($t="checked='checked'",yt="active")):(vt="checked='checked'",gt="active");var ge=n[5];if(0!=ge){ut="red";var ze=ge.split(",");$.inArray("1",ze)>-1&&(wt="checked='checked'",Ct="active"),$.inArray("2",ze)>-1&&(Tt="checked='checked'",At="active"),$.inArray("3",ze)>-1&&(St="checked='checked'",Ot="active"),$.inArray("4",ze)>-1&&(jt="checked='checked'",qt="active"),$.inArray("5",ze)>-1&&(It="checked='checked'",Dt="active"),$.inArray("6",ze)>-1&&(Et="checked='checked'",Lt="active"),$.inArray("7",ze)>-1&&(Ht="checked='checked'",Gt="active"),$.inArray("8",ze)>-1&&(Rt="checked='checked'",Ft="active"),$.inArray("9",ze)>-1&&(Pt="checked='checked'",Ut="active")}else xt="checked='checked'",kt="active";var be=n[6];if(0!=be){ht="red";var $e=be.split(",");$.each(f_attr_json,function(t,e){t++,$.inArray(t.toString(),$e)>-1&&(mt["out_f_attr_"+t]="checked='checked'",mt["out_f_attr_"+t+"_active"]="active")})}else mt.out_f_attr_0="checked='checked'",mt.out_f_attr_0_active="active";var ye=n[7];0!=ye?(ft="red",1==ye?(Jt="checked='checked'",Vt="active"):(Wt="checked='checked'",Xt="active")):(Mt="checked='checked'",Nt="active");var xe,ke=n[8];if(0!=ke){pt="red";var we=ke.split(",");$.inArray("1",we)>-1&&(Qt="checked='checked'",Kt="active"),$.inArray("2",we)>-1&&(Zt="checked='checked'",te="active"),$.inArray("3",we)>-1&&(ee="checked='checked'",ae="active"),$.inArray("4",we)>-1&&(ie="checked='checked'",le="active"),$.inArray("5",we)>-1&&(se="checked='checked'",ne="active"),$.inArray("6",we)>-1&&(de="checked='checked'",ce="active"),$.inArray("7",we)>-1&&(re="checked='checked'",oe="active"),$.inArray("8",we)>-1&&(he="checked='checked'",_e="active"),$.inArray("9",we)>-1&&(fe="checked='checked'",ue="active")}else Yt="checked='checked'",Bt="active";if(0!=(xe=n[9])){o="red";B=xe.split(",");$.inArray("1",B)>-1&&(P="checked='checked'",U="active"),$.inArray("2",B)>-1&&(M="checked='checked'",N="active")}else R="checked='checked'",F="active";var Ce='<li><label class="zh-fd-checkbox flight_attribute '+mt.in_f_attr_0_active+'"><input name="in_f_attr[]" type="checkbox" value="0" '+mt.in_f_attr_0+">全部属性</label></li>";$.each(f_attr_json,function(t,e){Ce+='<li><label class="zh-fd-checkbox flight_attribute '+mt["in_f_attr_"+ ++t+"_active"]+'"><input name="in_f_attr[]" type="checkbox" value="'+t+'" '+mt["in_f_attr_"+t]+">"+e+"</label></li>"});var Te='<li><label class="zh-fd-checkbox flight_vip '+gt+'"><input name="in_f_vip[]" type="checkbox" value="0" '+vt+">全部航班</label></li>";Te+='<li><label class="zh-fd-checkbox flight_vip '+bt+'"><input name="in_f_vip[]" type="checkbox" value="1" '+zt+">普通航班</label></li>",Te+='<li><label class="zh-fd-checkbox flight_vip '+yt+'"><input name="in_f_vip[]" type="checkbox" value="2" '+$t+">要客航班</label></li>";var Ae='<li><label class="zh-fd-checkbox flight_status_code '+kt+'"><input name="in_f_status_code[]" value="0" type="checkbox" '+xt+">全部</label></li>";Ae+='<li><label class="zh-fd-checkbox flight_status_code '+Ct+'"><input name="in_f_status_code[]" type="checkbox" value="1" '+wt+">计划</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+At+'"><input name="in_f_status_code[]" type="checkbox" value="2" '+Tt+">起飞</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+Ot+'"><input name="in_f_status_code[]" type="checkbox" value="3" '+St+">到达</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+qt+'"><input name="in_f_status_code[]" type="checkbox" value="4" '+jt+">延误</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+Dt+'"><input name="in_f_status_code[]" type="checkbox" value="5" '+It+">取消</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+Lt+'"><input name="in_f_status_code[]" type="checkbox" value="6" '+Et+">备降</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+Gt+'"><input name="in_f_status_code[]" type="checkbox" value="7" '+Ht+">滑回</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+Ft+'"><input name="in_f_status_code[]" type="checkbox" value="8" '+Rt+">返航</label></li>",Ae+='<li><label class="zh-fd-checkbox flight_status_code '+Ut+'"><input name="in_f_status_code[]" type="checkbox" value="9" '+Pt+">非营运</label></li>";var Se='<li><label class="zh-fd-checkbox flight_attribute '+mt.out_f_attr_0_active+'"><input name="out_f_attr[]" type="checkbox" value="0" '+mt.out_f_attr_0+">全部属性</label></li>";$.each(f_attr_json,function(t,e){Se+='<li><label class="zh-fd-checkbox flight_attribute '+mt["out_f_attr_"+ ++t+"_active"]+'"><input name="out_f_attr[]" type="checkbox" value="'+t+'" '+mt["out_f_attr_"+t]+">"+e+"</label></li>"});var Oe='<li><label class="zh-fd-checkbox flight_vip '+Nt+'"><input name="out_f_vip[]" type="checkbox" value="0" '+Mt+">全部航班</label></li>";Oe+='<li><label class="zh-fd-checkbox flight_vip '+Vt+'"><input name="out_f_vip[]" type="checkbox" value="1" '+Jt+">普通航班</label></li>",Oe+='<li><label class="zh-fd-checkbox flight_vip '+Xt+'"><input name="out_f_vip[]" type="checkbox" value="2" '+Wt+">要客航班</label></li>";var je='<li><label class="zh-fd-checkbox flight_status_code '+Bt+'"><input name="out_f_status_code[]" value="0" type="checkbox" '+Yt+">全部</label></li>";je+='<li><label class="zh-fd-checkbox flight_status_code '+Kt+'"><input name="out_f_status_code[]" type="checkbox" value="1" '+Qt+">计划</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+te+'"><input name="out_f_status_code[]" type="checkbox" value="2" '+Zt+">起飞</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+ae+'"><input name="out_f_status_code[]" type="checkbox" value="3" '+ee+">到达</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+le+'"><input name="out_f_status_code[]" type="checkbox" value="4" '+ie+">延误</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+ne+'"><input name="out_f_status_code[]" type="checkbox" value="5" '+se+">取消</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+ce+'"><input name="out_f_status_code[]" type="checkbox" value="6" '+de+">备降</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+oe+'"><input name="out_f_status_code[]" type="checkbox" value="7" '+re+">滑回</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+_e+'"><input name="out_f_status_code[]" type="checkbox" value="8" '+he+">返航</label></li>",je+='<li><label class="zh-fd-checkbox flight_status_code '+ue+'"><input name="out_f_status_code[]" type="checkbox" value="9" '+fe+">非营运</label></li>";tt='<li><label class="zh-fd-checkbox release '+F+'"><input name="f_release_situation[]" type="checkbox" value="0" '+R+">全部</label></li>";tt+='<li><label class="zh-fd-checkbox release '+U+'"><input name="f_release_situation[]" type="checkbox" value="1" '+P+">正常</label></li>",tt+='<li><label class="zh-fd-checkbox release '+N+'"><input name="f_release_situation[]" type="checkbox" value="2" '+M+">延误</label></li>"}else{Ce='<li><label class="zh-fd-checkbox flight_attribute  active"><input name="in_f_attr[]" type="checkbox" value="0" checked="checked">全部属性</label></li>';$.each(f_attr_json,function(t,e){Ce+='<li><label class="zh-fd-checkbox flight_attribute "><input name="in_f_attr[]" type="checkbox" value="'+ ++t+'">'+e+"</label></li>"});Se='<li><label class="zh-fd-checkbox flight_attribute  active"><input name="out_f_attr[]" type="checkbox" value="0" checked="checked">全部属性</label></li>';$.each(f_attr_json,function(t,e){Se+='<li><label class="zh-fd-checkbox flight_attribute "><input name="out_f_attr[]" type="checkbox" value="'+ ++t+'">'+e+"</label></li>"});Te='<li><label class="zh-fd-checkbox flight_vip active"><input name="in_f_vip[]" type="checkbox" value="0" checked="checked">全部航班</label></li>';Te+='<li><label class="zh-fd-checkbox flight_vip"><input name="in_f_vip[]" type="checkbox" value="1">普通航班</label></li>',Te+='<li><label class="zh-fd-checkbox flight_vip"><input name="in_f_vip[]" type="checkbox" value="2">要客航班</label></li>';Oe='<li><label class="zh-fd-checkbox flight_vip active"><input name="out_f_vip[]" type="checkbox" value="0" checked="checked">全部航班</label></li>';Oe+='<li><label class="zh-fd-checkbox flight_vip"><input name="out_f_vip[]" type="checkbox" value="1">普通航班</label></li>',Oe+='<li><label class="zh-fd-checkbox flight_vip"><input name="out_f_vip[]" type="checkbox" value="2">要客航班</label></li>';Ae='<li><label class="zh-fd-checkbox flight_status_code active"><input name="in_f_status_code[]" value="0" type="checkbox" checked="checked">全部</label></li>';Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="1">计划</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="2">起飞</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="3">到达</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="4">延误</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="5">取消</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="6">备降</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="7">滑回</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="8">返航</label></li>',Ae+='<li><label class="zh-fd-checkbox flight_status_code"><input name="in_f_status_code[]" type="checkbox" value="9">非营运</label></li>';je='<li><label class="zh-fd-checkbox flight_status_code active"><input name="out_f_status_code[]" value="0" type="checkbox" checked="checked">全部</label></li>';je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="1">计划</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="2">起飞</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="3">到达</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="4">延误</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="5">取消</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="6">备降</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="7">滑回</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="8">返航</label></li>',je+='<li><label class="zh-fd-checkbox flight_status_code"><input name="out_f_status_code[]" type="checkbox" value="9">非营运</label></li>';tt='<li><label class="zh-fd-checkbox release active"><input name="f_release_situation[]" type="checkbox" value="0" checked="checked">全部</label></li>';tt+='<li><label class="zh-fd-checkbox release"><input name="f_release_situation[]" type="checkbox" value="1">正常</label></li>',tt+='<li><label class="zh-fd-checkbox release"><input name="f_release_situation[]" type="checkbox" value="2">延误</label></li>'}var qe="",Ie="",De="",Ee="",Le="",He="",Ge="",Re="",Fe="",Pe="",Ue="",Me="";"in_scheduled_deptime"==a.order_field?qe="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"in_estimated_deptime"==a.order_field?Ie="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"in_actual_deptime"==a.order_field?De="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"in_scheduled_arrtime"==a.order_field?Ee="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"in_estimated_arrtime"==a.order_field?Le="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"in_actual_arrtime"==a.order_field?He="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"out_scheduled_deptime"==a.order_field?Ge="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"out_estimated_deptime"==a.order_field?Re="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"out_actual_deptime"==a.order_field?Fe="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"out_scheduled_arrtime"==a.order_field?Pe="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"out_estimated_arrtime"==a.order_field?Ue="ASC"==a.order_type?"zh-order-asc":"zh-order-desc":"out_actual_arrtime"==a.order_field&&(Me="ASC"==a.order_type?"zh-order-asc":"zh-order-desc");var Ne=i[s].in.length+1,Je=i[s].out.length+1;dt='<tr class="am-thead-row">';dt+='<th class="am-num-cell">&nbsp;</th>',dt+='<th class="am-arrive-cell tc" colspan="'+Ne+'">进港</th>',dt+='<th class="am-leave-cell tc" colspan="'+Je+'">出港</th>',dt+="</tr>",dt+="<tr>",dt+='<th class="am-num-cell"><div class="zh-cell-wrap">关注</div></th>';var Ve="am-arrive-cell",We="am-leave-cell",Xe=["in_scheduled_deptime","in_estimated_deptime","in_actual_deptime","in_scheduled_arrtime","in_estimated_arrtime","in_actual_arrtime","out_scheduled_deptime","out_estimated_deptime","out_actual_deptime","out_scheduled_arrtime","out_estimated_arrtime","out_actual_arrtime","cobt","ctot"];$.each(i[s].in,function(t,e){"in_cla"==field_config[s].in[e].name?dt+=' <th class="'+Ve+'"><div class="zh-cell-wrap"><span class="zh-field-name '+ot+'">属性</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown"><ul class="zh-fd-scrollbar3">'+Ce+"</ul></div></div></th>":"in_fnum"==field_config[s].in[e].name?dt+='<th class="'+Ve+'"><div class="zh-cell-wrap"><span class="zh-field-name '+_t+'">'+field_config[s].in[e].cn_name+'</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown"><ul>'+Te+"</ul></div></div></th>":"in_flight_status_code"==field_config[s].in[e].name?dt+='<th class="'+Ve+'"><div class="zh-cell-wrap"><span class="zh-field-name '+ut+'">状态</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown zh-width-80"><ul class="zh-fd-scrollbar3">'+Ae+"</ul></div></div></th>":"in_scheduled_deptime"==field_config[s].in[e].name?dt+='<th class="'+Ve+' zh-order"><div class="zh-cell-wrap"><span title="计划起飞时间" class="zh-field-name">计飞</span> <span class="zh-icon-order '+qe+'" order_field="in_scheduled_deptime"></span></div></th>':"in_estimated_deptime"==field_config[s].in[e].name?dt+='<th class="'+Ve+' zh-order"><div class="zh-cell-wrap"><span title="预计起飞时间" class="zh-field-name">预飞(F)</span> <span class="zh-icon-order '+Ie+'" order_field="in_estimated_deptime"></span></div></th>':"in_actual_deptime"==field_config[s].in[e].name?dt+='<th class="'+Ve+' zh-order"><div class="zh-cell-wrap"><span title="实际起飞时间" class="zh-field-name">实飞</span> <span class="zh-icon-order '+De+'" order_field="in_actual_deptime"></span></div></th>':"in_scheduled_arrtime"==field_config[s].in[e].name?dt+='<th class="'+Ve+' zh-order"><div class="zh-cell-wrap"><span title="计划到达时间" class="zh-field-name">计达</span> <span class="zh-icon-order '+Ee+'" order_field="in_scheduled_arrtime"></span></div></th>':"in_estimated_arrtime"==field_config[s].in[e].name?dt+='<th class="'+Ve+' zh-order"><div class="zh-cell-wrap"><span title="预计到达时间" class="zh-field-name">预达(F)</span> <span class="zh-icon-order '+Le+'" order_field="in_estimated_arrtime"></span></div></th>':"in_actual_arrtime"==field_config[s].in[e].name?dt+='<th class="'+Ve+' zh-order"><div class="zh-cell-wrap"><span title="实际到达时间" class="zh-field-name">实达</span> <span class="zh-icon-order '+He+'" order_field="in_actual_arrtime"></span></div></th>':dt+='<th class="'+Ve+'"><div class="zh-cell-wrap"><span class="zh-field-name">'+field_config[s].in[e].cn_name+"</span></div></th>"}),dt+='<th class="'+Ve+'"><span class="zh-field-name">操作</span></th>',$.each(i[s].out,function(t,e){"out_cla"==field_config[s].out[e].name?dt+=' <th class="'+We+'"><div class="zh-cell-wrap"><span class="zh-field-name '+ht+'">属性</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown"><ul class="zh-fd-scrollbar3">'+Se+"</ul></div></div></th>":"out_fnum"==field_config[s].out[e].name?dt+='<th class="'+We+'"><div class="zh-cell-wrap"><span class="zh-field-name '+ft+'">'+field_config[s].out[e].cn_name+'</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown"><ul>'+Oe+"</ul></div></div></th>":"out_flight_status_code"==field_config[s].out[e].name?dt+='<th class="'+We+'"><div class="zh-cell-wrap"><span class="zh-field-name '+pt+'">状态</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown zh-width-80"><ul class="zh-fd-scrollbar3">'+je+"</ul></div></div></th>":"out_scheduled_deptime"==field_config[s].out[e].name?dt+='<th class="'+We+' zh-order"><div class="zh-cell-wrap"><span title="计划起飞时间" class="zh-field-name">计飞</span> <span class="zh-icon-order '+Ge+'" order_field="out_scheduled_deptime"></span></div></th>':"out_estimated_deptime"==field_config[s].out[e].name?dt+='<th class="'+We+' zh-order"><div class="zh-cell-wrap"><span title="预计起飞时间" class="zh-field-name">预飞(F)</span> <span class="zh-icon-order '+Re+'" order_field="out_estimated_deptime"></span></div></th>':"out_actual_deptime"==field_config[s].out[e].name?dt+='<th class="'+We+' zh-order"><div class="zh-cell-wrap"><span title="实际起飞时间" class="zh-field-name">实飞</span> <span class="zh-icon-order '+Fe+'" order_field="out_actual_deptime"></span></div></th>':"out_scheduled_arrtime"==field_config[s].out[e].name?dt+='<th class="'+We+' zh-order"><div class="zh-cell-wrap"><span title="计划到达时间" class="zh-field-name">计达</span> <span class="zh-icon-order '+Pe+'" order_field="out_scheduled_arrtime"></span></div></th>':"out_estimated_arrtime"==field_config[s].out[e].name?dt+='<th class="'+We+' zh-order"><div class="zh-cell-wrap"><span title="预计到达时间" class="zh-field-name">预达(F)</span> <span class="zh-icon-order '+Ue+'" order_field="out_estimated_arrtime"></span></div></th>':"out_actual_arrtime"==field_config[s].out[e].name?dt+='<th class="'+We+' zh-order"><div class="zh-cell-wrap"><span title="实际到达时间" class="zh-field-name">实达</span> <span class="zh-icon-order '+Me+'" order_field="out_actual_arrtime"></span></div></th>':"release_situation"==field_config[s].out[e].name?dt+=' <th><div class="zh-cell-wrap"><span class="zh-field-name '+o+'">放行情况</span><span class="zh-icon-dropdown"></span><div class="zh-field-dropdown zh-width-80"><ul class="zh-fd-scrollbar3">'+tt+"</ul></div></div></th>":dt+='<th class="'+We+'"><div class="zh-cell-wrap"><span class="zh-field-name">'+field_config[s].out[e].cn_name+"</span></div></th>"}),dt+='<th class="'+We+'"><span class="zh-field-name">操作</span></th>',$(".flight-list-table thead").html(dt);ct="";$.each(e,function(e,a){var l="",n="";1==a.is_attention&&(l="checked='checked'",n="active");var d="";"1"===a.in_is_vip&&(d='<span class="zh-vip-yellow">V</span>');var c="";1==a.in_is_meeting&&(c='<span class="zh-vip-yellow">M</span>');var r="",o="",h="";""!==a.in_fnum_share_tip&&(r="zh-tip-share",o='data-share="'+a.in_fnum_share_tip+'"',h="zh-text-black-bold");var _=a.in_second_state_str,f="",u="";1==a.in_es_arr_time_adsb&&(u='<i class="am-icon-A">A</i>'),1==a.in_es_dep_time_adsb&&(f='<i class="am-icon-A">A</i>');var p="";1==a.is_delay_flight&&(p="delay"),ct+='<tr class="'+p+'" id="'+e+'">',ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><label class="zh-fd-checkbox attention_id '+n+'"><input class="attention_flight" type="checkbox" name="attention" value="'+e+'" '+l+">"+a.id+"</label></div></td>",$.each(i[s].in,function(e,i){"in_fnum"==field_config[s].in[i].name?ct+='<td class="'+a.in_flight_status_code_class+" "+r+'" '+o+'><div class="zh-cell-wrap"><a data-fid="'+a.in_fid+'" class="zh-field-value zh-flight-number '+h+'" href="###">'+a[field_config[s].in[i].name]+"</a>"+d+c+"</div></td>":"airport_lines"==field_config[s].in[i].name&&""!==a.in_fid?ct+='<td class="zh-tip-share '+a.in_flight_status_code_class+'" data-share="'+a[field_config[s].in[i].name]+'"><div class="zh-cell-wrap"><a data-fid="'+a.in_fid+'" class="zh-field-value zh-airline" href="###">'+t(a[field_config[s].in[i].name])+"</a></div></td>":"in_flight_status_code"==field_config[s].in[i].name?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value">'+a[field_config[s].in[i].name]+"</span> "+_+"</div></td>":"in_process_status"==field_config[s].in[i].name?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><a target="_blank" href="'+a.in_process_detail_link+'" class="zh-field-value">'+a[field_config[s].in[i].name]+"</a></div></td>":"in_aircraft_num"==field_config[s].in[i].name?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><a data-flight-date="'+a.in_flight_date+'" data-aircraft-type="'+a.aircraft_type+'" class="zh-field-value zh-plane-number" href="###">'+a[field_config[s].in[i].name]+"</a></div></td>":"aircraft_type"==field_config[s].in[i].name&&""!==a.in_fid?ct+='<td class="am-plane-type '+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value zh-plane-type"><i>'+a[field_config[s].in[i].name]+"</i></span></div></td>":-1!==field_config[s].in[i].name.indexOf("estimated_deptime")&&-1==field_config[s].in[i].name.indexOf("isd")?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap">'+f+'<input data-field-val="'+a[field_config[s].in[i].name]+'" data-field="'+field_config[s].in[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].in[i].name]+'" type="text"></div></td>':-1!==field_config[s].in[i].name.indexOf("estimated_arrtime")&&-1==field_config[s].in[i].name.indexOf("isd")?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap">'+u+'<input data-field-val="'+a[field_config[s].in[i].name]+'" data-field="'+field_config[s].in[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].in[i].name]+'" type="text"></div></td>':-1!==$.inArray(field_config[s].in[i].name,Xe)?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[s].in[i].name]+'" data-field="'+field_config[s].in[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].in[i].name]+'" type="text"></div></td>':"in_aoc_info"==field_config[s].in[i].name?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[s].in[i].name]+'" data-field="'+field_config[s].in[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].in[i].name]+'" type="text"></div></td>':""!==a.in_fid?ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+a[field_config[s].in[i].name]+"</span></div></td>":ct+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>'}),""!==a.in_fid?ct+='<td data-fid="'+a.in_fid+'" class="show_fid '+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><a class="zh-field-value zh-edit" href="###">编辑</a><a class="zh-field-value zh-msg zh-ml-5" href="###">消息</a></div></td>':ct+='<td class="show_fid '+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>';var m="";"1"===a.out_is_vip&&(m='<span class="zh-vip-black">V</span>');var v="";1==a.out_is_meeting&&(v='<span class="zh-vip-black">M</span>');var g="",z="",b="";""!==a.out_fnum_share_tip&&(g="zh-tip-share",z='data-share="'+a.out_fnum_share_tip+'"',b="zh-text-black-bold");var y=a.out_second_state_str,x="",k="";1==a.out_es_arr_time_adsb&&(k='<i class="am-icon-A">A</i>'),1==a.out_es_dep_time_adsb&&(x='<i class="am-icon-A">A</i>'),$.each(i[s].out,function(e,i){if("out_fnum"==field_config[s].out[i].name)ct+='<td class="'+a.out_flight_status_code_class+" "+g+'" '+z+'><div class="zh-cell-wrap"><a data-fid="'+a.out_fid+'" class="zh-field-value zh-flight-number '+b+'" href="###">'+a[field_config[s].out[i].name]+"</a>"+m+v+"</div></td>";else if("airport_lines"==field_config[s].out[i].name&&""!==a.out_fid)ct+='<td class="zh-tip-share '+a.out_flight_status_code_class+'" data-share="'+a[field_config[s].out[i].name]+'"><div class="zh-cell-wrap"><a data-fid="'+a.out_fid+'" class="zh-field-value zh-airline" href="###">'+t(a[field_config[s].out[i].name])+"</a></div></td>";else if("out_flight_status_code"==field_config[s].out[i].name)ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value">'+a[field_config[s].out[i].name]+"</span> "+y+"</div></td>";else if("out_process_status"==field_config[s].out[i].name)ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><a target="_blank" href="'+a.out_process_detail_link+'" class="zh-field-value">'+a[field_config[s].out[i].name]+"</a></div></td>";else if("out_aircraft_num"==field_config[s].out[i].name)ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><a data-flight-date="'+a.out_flight_date+'" data-aircraft-type="'+a.aircraft_type+'" class="zh-field-value zh-plane-number" href="###">'+a[field_config[s].out[i].name]+"</a></div></td>";else if("aircraft_type"==field_config[s].out[i].name&&""!==a.out_fid)ct+='<td class="am-plane-type '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value zh-plane-type"><i>'+a[field_config[s].out[i].name]+"</i></span></div></td>";else if(-1!==field_config[s].out[i].name.indexOf("estimated_deptime")&&-1==field_config[s].out[i].name.indexOf("isd"))ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap">'+x+'<input data-field-val="'+a[field_config[s].out[i].name]+'" data-field="'+field_config[s].out[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].out[i].name]+'" type="text"></div></td>';else if(-1!==field_config[s].out[i].name.indexOf("estimated_arrtime")&&-1==field_config[s].out[i].name.indexOf("isd"))ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap">'+k+'<input data-field-val="'+a[field_config[s].out[i].name]+'" data-field="'+field_config[s].out[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].out[i].name]+'" type="text"></div></td>';else if(-1!==$.inArray(field_config[s].out[i].name,Xe))ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[s].out[i].name]+'" data-field="'+field_config[s].out[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].out[i].name]+'" type="text"></div></td>';else if("out_aoc_info"==field_config[s].out[i].name)ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[s].out[i].name]+'" data-field="'+field_config[s].out[i].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[s].out[i].name]+'" type="text"></div></td>';else if("release_situation"==field_config[s].out[i].name)ct+='<td class="zh-bg-bgray '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap">'+a.release_situation+a.release_situation_time+"</div></td>";else if("turnaround_time"==field_config[s].out[i].name)if(""==a.turnaround_time)ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value "></span></div></td>';else{var l=a.turnaround_time;-1!=l.indexOf("+")?ct+='<td class="am-font-red '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+l+"</span></div></td>":ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+l+"</span></div></td>"}else""!==a.out_fid?ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+a[field_config[s].out[i].name]+"</span></div></td>":ct+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>'}),""!==a.out_fid?ct+='<td data-fid="'+a.out_fid+'" class="show_fid '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><a class="zh-field-value zh-edit" href="###">编辑</a><a class="zh-field-value zh-msg zh-ml-5" href="###">消息</a></div></td>':ct+='<td class="show_fid '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>',ct+="</tr>"}),$(".flight-list-table tbody").html(ct)}}function i(){$(".flight-list-table tbody").children("tr:not(.zh-thead-pad,.delay)").each(function(t,e){var a=t+1,i=$(this).children("td").eq(0).text();if(parseInt(i)!=a){var l=$(this).children("td:first").find("label").html();l=l.substring(0,l.length-3),1==a.toString().length?l=l+"00"+a.toString():2==a.toString().length?l=l+"0"+a.toString():l+=a.toString(),$(this).children("td:first").find("label").html(l)}})}function l(e,l){var s,n,d=e.field_list;1==l.init?void 0!==e.init&&a(e.init,l,d):void 0!==e.init&&0!==e.init.length&&a(e.init,l,d),void 0!==e.update&&""!=e.update?(time_interval=3e3,function(t,e,a){var l=e.f_status,s="",n=["in_scheduled_deptime","in_estimated_deptime","in_actual_deptime","in_scheduled_arrtime","in_estimated_arrtime","in_actual_arrtime","out_scheduled_deptime","out_estimated_deptime","out_actual_deptime","out_scheduled_arrtime","out_estimated_arrtime","out_actual_arrtime","scheduled_deptime","estimated_deptime","actual_deptime","scheduled_arrtime","estimated_arrtime","actual_arrtime","cobt","ctot"];if("all"!==(s=-1!==l.indexOf("in")?"in":-1!==l.indexOf("out")?"out":-1!==l.indexOf("all")?"all":-1!==l.indexOf("food")?"food":l))$.each(a[s],function(t,e){field_map[s][field_config[s][e].name]=t+1}),$.each(t,function(t,e){var a=$("#flight_list_"+t),l=0;$.each(e,function(t,e){void 0!==field_map[s][t]&&(l+=1)});var d=0;$.each(e,function(c,r){var o=field_map[s][c];if(void 0!=o){if(++d,"process_status"==c)a.children("td").eq(o).find("a").addClass("zh-text-black-bold"),a.children("td").eq(o).find("a").html(r),void 0!=e.process_time&&a.children("td").eq(o).attr("title",e.process_time);else if("process_time"==c)a.children("td").eq(o).attr("title",r);else if("airport_lines"==c)a.children("td").eq(o).html('<div class="zh-cell-wrap"><a href="###" class="zh-field-value zh-text-black-bold zh-airline">'+r+"</a></div>");else if("aircraft_num"==c)a.children("td").eq(o).html('<div class="zh-cell-wrap"><a href="###" class="zh-field-value zh-text-black-bold zh-plane-number">'+r+"</a></div>");else if("in_flight_status_code"==c||"out_flight_status_code"==c||"flight_status_code"==c){var h="";"到达"==r?h="zh-bg-blue":"起飞"==r?h="zh-bg-green":"延误"==r?h="zh-bg-yellow":"备降"!=r&&"返航"!=r&&"取消"!=r&&"正在返航"!=r&&"正在备降"!=r||(h="zh-bg-red");var _="";void 0!==e.second_state&&(_=e.second_state),a.removeClass("zh-bg-blue zh-bg-green zh-bg-yellow zh-bg-red").addClass(h),a.children("td").eq(o).html('<div class="zh-cell-wrap"><span class="zh-field-value zh-text-black-bold">'+r+"</span>"+_+"</div>")}else if("in_fnum"==c||"out_fnum"==c||"fnum"==c)a.children("td").eq(o).html('<div class="zh-cell-wrap"><a href="###" class="zh-field-value zh-text-black-bold zh-flight-number ">'+r+"</a></div>");else if(-1!==$.inArray(c,n))if("estimated_deptime"==c||"in_estimated_deptime"==c||"out_estimated_deptime"==c){var f="";1==e.es_dep_time_adsb&&(f='<i class="am-icon-A">A</i>'),a.children("td").eq(o).html('<div class="zh-cell-wrap">'+f+'<input class="zh-input-dynamic zh-text-black-bold" data-field-val="'+r+'" data-field="'+c+'" value="'+r+'" readonly="readonly" type="text"></div>')}else"estimated_arrtime"==c||"in_estimated_arrtime"==c||"out_estimated_arrtime"==c?(f="",1==e.es_arr_time_adsb&&(f='<i class="am-icon-A">A</i>'),a.children("td").eq(o).html('<div class="zh-cell-wrap">'+f+'<input class="zh-input-dynamic zh-text-black-bold" data-field-val="'+r+'" data-field="'+c+'" value="'+r+'" readonly="readonly" type="text"></div>')):a.children("td").eq(o).html('<div class="zh-cell-wrap"><input class="zh-input-dynamic zh-text-black-bold" data-field-val="'+r+'" data-field="'+c+'" value="'+r+'" readonly="readonly" type="text"></div>');else if("aoc_info"==c)a.children("td").eq(o).html('<div class="zh-cell-wrap"><input class="zh-input-dynamic zh-text-black-bold" data-field-val="'+r+'" data-field="'+c+'" value="'+r+'" readonly="readonly" type="text"></div>');else if("release_situation"==c)a.children("td").eq(o).html('<div class="zh-cell-wrap">'+e.release_situation+e.release_situation_time+"</div>");else if("turnaround_time"==c)if(""==e.turnaround_time)a.children("td").eq(o).html('<div class="zh-cell-wrap"></div>');else{var u=e.turnaround_time;-1!=u.indexOf("+")?a.children("td").eq(o).addClass("am-font-red").html('<div class="zh-cell-wrap"><span class="zh-field-value ">'+u+"</span></div>"):a.children("td").eq(o).removeClass("am-font-red").html('<div class="zh-cell-wrap"><span class="zh-field-value ">'+u+"</span></div>")}else"aircraft_type"==c?a.children("td").eq(o).html('<div class="zh-cell-wrap"><span class="zh-field-value zh-text-black-bold"><i>'+r+"</i></span></div>"):a.children("td").eq(o).html('<div class="zh-cell-wrap"><span class="zh-field-value zh-text-black-bold">'+r+"</span></div>");if(d==l){var p=a.prev();if(""!=e.insert_fid_below){if(p.attr("id")!=="flight_list_"+e.insert_fid_below&&p.attr("id")!=="flight_list_"+t){var m=a.clone();a.remove(),0==$("#flight_list_"+t).length&&($("#flight_list_"+e.insert_fid_below).after(m),i())}}else void 0!==p&&void 0!==p.attr("data-flight-date")&&(m=a.clone(),a.remove(),$(".flight-list-table tbody").prepend(m),i())}}})});else{var d="";$.each(a[s].in,function(t,e){field_map[s].in[field_config[s].in[e].name]=t+1,d=t+1});var c=d+1;$.each(a[s].out,function(t,e){c+=1,field_map[s].out[field_config[s].out[e].name]=c}),$.each(t,function(t,e){var a=0,l=0;$.each(e,function(t,e){if(-1!==$.inArray(t,field_config.in_field))var i=field_map[s].in[t];else i=field_map[s].out[t];void 0!=i&&(a+=1)});var c=$("#"+t);$.each(e,function(r,o){if(-1!==$.inArray(r,field_config.in_field))var h=field_map[s].in[r];else h=field_map[s].out[r];if(void 0!=h){if(++l,"in_process_status"==r||"out_process_status"==r)c.children("td").eq(h).find("a").addClass("zh-text-black-bold"),c.children("td").eq(h).find("a").html(o);else if("airport_lines"==r)c.children("td").eq(h).html('<div class="zh-cell-wrap"><a href="###" class="zh-field-value zh-text-black-bold zh-airline">'+o+"</a></div>");else if("in_aircraft_num"==r||"out_aircraft_num"==r)c.children("td").eq(h).html('<div class="zh-cell-wrap"><a href="###" class="zh-field-value zh-text-black-bold zh-plane-number">'+o+"</a></div>");else if("in_flight_status_code"==r){for(var _=0;_<d+2;_++)c.children("td").eq(_).hasClass("zh-bg-blue")?c.children("td").eq(_).removeClass("zh-bg-blue"):c.children("td").eq(_).hasClass("zh-bg-green")?c.children("td").eq(_).removeClass("zh-bg-green"):c.children("td").eq(_).hasClass("zh-bg-yellow")?c.children("td").eq(_).removeClass("zh-bg-yellow"):c.children("td").eq(_).hasClass("zh-bg-red")&&c.children("td").eq(_).removeClass("zh-bg-red"),c.children("td").eq(_).addClass(e.in_flight_status_code_class);c.children("td").eq(h).html('<div class="zh-cell-wrap"><span class="zh-field-value zh-text-black-bold">'+o+"</span></div>")}else if("out_flight_status_code"==r){var f=c.find("td").length;for(_=d+2;_<f;_++)c.children("td").eq(_).hasClass("zh-bg-blue")?c.children("td").eq(_).removeClass("zh-bg-blue"):c.children("td").eq(_).hasClass("zh-bg-green")?c.children("td").eq(_).removeClass("zh-bg-green"):c.children("td").eq(_).hasClass("zh-bg-yellow")?c.children("td").eq(_).removeClass("zh-bg-yellow"):c.children("td").eq(_).hasClass("zh-bg-red")&&c.children("td").eq(_).removeClass("zh-bg-red"),c.children("td").eq(_).addClass(e.out_flight_status_code_class);c.children("td").eq(h).html('<div class="zh-cell-wrap"><span class="zh-field-value zh-text-black-bold">'+o+"</span></div>")}else if("in_fnum"==r||"out_fnum"==r)c.children("td").eq(h).html('<div class="zh-cell-wrap"><a href="###" class="zh-field-value zh-text-black-bold zh-flight-number ">'+o+"</a></div>");else if(-1!==$.inArray(r,n))c.children("td").eq(h).html('<div class="zh-cell-wrap"><input class="zh-input-dynamic zh-text-black-bold" data-field-val="'+o+'" data-field="'+r+'" value="'+o+'" readonly="readonly" type="text"></div>');else if("in_aoc_info"==r||"out_aoc_info"==r)c.children("td").eq(h).html('<div class="zh-cell-wrap"><input class="zh-input-dynamic zh-text-black-bold" data-field-val="'+o+'" data-field="'+r+'" value="'+o+'" readonly="readonly" type="text"></div>');else if("release_situation"==r)c.children("td").eq(h).html('<div class="zh-cell-wrap">'+e.release_situation+e.release_situation_time+"</div>");else if("turnaround_time"==r)if(""==e.turnaround_time)c.children("td").eq(h).html('<div class="zh-cell-wrap"></div>');else{var u=e.turnaround_time;-1!=u.indexOf("+")?c.children("td").eq(h).addClass("am-font-red").html('<div class="zh-cell-wrap"><span class="zh-field-value ">'+u+"</span></div>"):c.children("td").eq(h).removeClass("am-font-red").html('<div class="zh-cell-wrap"><span class="zh-field-value ">'+u+"</span></div>")}else"aircraft_type"==r?c.children("td").eq(h).html('<div class="zh-cell-wrap"><span class="zh-field-value zh-text-black-bold"><i>'+o+"</i></span></div>"):c.children("td").eq(h).html('<div class="zh-cell-wrap"><span class="zh-field-value zh-text-black-bold">'+o+"</span></div>");if(l==a){var p=c.prev();if(""!=e.insert_fid_below){if(p.attr("id")!==e.insert_fid_below&&p.attr("id")!==t){var m=c.clone();c.remove(),0==$("#"+t).length&&($("#"+e.insert_fid_below).after(m),i())}}else void 0!==p&&void 0!==p.attr("id")&&(m=c.clone(),c.remove(),$(".flight-list-table tbody").prepend(m),i())}}})})}}(e.update,l,d)):time_interval=5e3,void 0!==e.add&&""!=e.add&&function(e,a,l){var s=a.f_status,n="";if("all"!==(n=-1!==s.indexOf("in")?"in":-1!==s.indexOf("out")?"out":-1!==s.indexOf("all")?"all":-1!==s.indexOf("food")?"food":s))$.each(e,function(e,a){if($("#flight_list_"+e).length>0)return!1;var i="",s="",d="";1===a.is_attention&&(s="checked='checked'",d="active");var c="";"1"===a.in_is_vip&&(c='<span class="zh-vip-yellow">V</span>');var r="";"1"===a.out_is_vip&&(r='<span class="zh-vip-black">V</span>');var o="";void 0!==a.is_vip&&"1"==a.is_vip&&void 0!==a.in_flag&&(o=1==a.in_flag?'<span class="zh-vip-yellow">V</span>':'<span class="zh-vip-black">V</span>');var h="";1==a.in_is_meeting&&(h='<span class="zh-vip-yellow">M</span>');var _="";1==a.out_is_meeting&&(_='<span class="zh-vip-black">M</span>');var f="";void 0!==a.is_meeting&&1==a.is_meeting&&void 0!==a.in_flag&&(f=1==a.in_flag?'<span class="zh-vip-yellow">M</span>':'<span class="zh-vip-black">M</span>');var u="",p="";void 0!==a[p="in"==n?"in_flight_status_code":"out"==n?"out_flight_status_code":"flight_status_code"]&&("到达"==a[p]?u="zh-bg-blue":"起飞"==a[p]?u="zh-bg-green":"延误"==a[p]?u="zh-bg-yellow":-1!==$.inArray(a[p],["备降","正在备降","返航","正在返航","取消"])&&(u="zh-bg-red"));var m="",v="",g="",z="",b="",y="",x="",k="",w="",C='class="zh-tip-share"',T="",A="",S="";void 0!==a.in_share_flight_string&&""!==a.in_share_flight_string&&(m="共享:"+a.in_share_flight_string,x="zh-text-black-bold"),void 0!==a.in_virtual_flight_string&&""!==a.in_virtual_flight_string&&(g="虚拟:"+a.in_virtual_flight_string,x="zh-text-black-bold"),""===m&&""===g||(T+=C+'data-share="'+m+g+'"'),void 0!==a.out_share_flight_string&&""!==a.out_share_flight_string&&(v="共享:"+a.out_share_flight_string,k="zh-text-black-bold"),void 0!==a.out_virtual_flight_string&&""!==a.out_virtual_flight_string&&(z+="虚拟:"+a.out_virtual_flight_string,k="zh-text-black-bold"),""===v&&""===z||(A+=C+'data-share="'+v+z+'"'),void 0!==a.share_flight_string&&""!==a.share_flight_string&&(b="共享:"+a.share_flight_string,w="zh-text-black-bold"),void 0!==a.virtual_flight_string&&""!==a.virtual_flight_string&&(y="虚拟:"+a.virtual_flight_string,w="zh-text-black-bold"),""===b&&""===y||(S+=C+'data-share="'+b+y+'"');var O=a.second_state,j="",q="";1==a.es_arr_time_adsb&&(q='<i class="am-icon-A">A</i>'),1==a.es_dep_time_adsb&&(j='<i class="am-icon-A">A</i>');var I="";1==a.is_delay_flight&&(I="delay"),i+='<tr class="'+I+" "+u+'" data-flight-date="'+a.flight_date+'"  id="flight_list_'+e+'">',i+='<td><div class="zh-cell-wrap"><label class="zh-fd-checkbox attention_id '+d+'"><input class="attention_flight" type="checkbox" name="attention" value="'+a.fid+'" '+s+">"+a.id+"</label></div></td>";var D=["in_scheduled_deptime","in_estimated_deptime","in_actual_deptime","in_scheduled_arrtime","in_estimated_arrtime","in_actual_arrtime","out_scheduled_deptime","out_estimated_deptime","out_actual_deptime","out_scheduled_arrtime","out_estimated_arrtime","out_actual_arrtime","scheduled_deptime","estimated_deptime","actual_deptime","scheduled_arrtime","estimated_arrtime","actual_arrtime","cobt","ctot"];$.each(l[n],function(e,l){if("in_fnum"==field_config[n][l].name)i+="<td "+T+'><div class="zh-cell-wrap"><a class="zh-field-value zh-flight-number '+x+'" href="###">'+a[field_config[n][l].name]+"</a>"+c+h+"</div></td>";else if("out_fnum"==field_config[n][l].name)i+="<td "+A+'><div class="zh-cell-wrap"><a class="zh-field-value zh-flight-number zh-text-gray2 '+k+'" href="###">'+a[field_config[n][l].name]+"</a>"+r+_+"</div></td>";else if("fnum"==field_config[n][l].name)i+="<td "+S+'><div class="zh-cell-wrap"><a class="zh-field-value zh-flight-number zh-text-gray2 '+w+'" href="###">'+a[field_config[n][l].name]+"</a>"+o+f+"</div></td>";else if("airport_lines"==field_config[n][l].name)i+='<td class="zh-tip-share" data-share="'+a[field_config[n][l].name]+'"><div class="zh-cell-wrap"><a class="zh-field-value zh-airline" href="###">'+t(a[field_config[n][l].name])+"</a></div></td>";else if("in_flight_status_code"==field_config[n][l].name||"out_flight_status_code"==field_config[n][l].name||"flight_status_code"==field_config[n][l].name)i+='<td><div class="zh-cell-wrap"><span class="zh-field-value">'+a[field_config[n][l].name]+"</span> "+O+"</div></td>";else if("process_status"==field_config[n][l].name)i+='<td title="'+a.process_time+'"><div class="zh-cell-wrap"><a target="_blank" href="'+a.process_detail_link+'" class="zh-field-value">'+a[field_config[n][l].name]+"</a></div></td>";else if("aircraft_num"==field_config[n][l].name)i+='<td><div class="zh-cell-wrap"><a data-aircraft-type="'+a.aircraft_type+'" class="zh-field-value zh-plane-number" href="###">'+a[field_config[n][l].name]+"</a></div></td>";else if("in_parking"==field_config[n][l].name||"out_parking"==field_config[n][l].name)i+='<td><div class="zh-cell-wrap">'+a[field_config[n][l].name]+"</div></td>";else if("aircraft_type"==field_config[n][l].name)i+='<td class="am-plane-type"><div class="zh-cell-wrap"><span class="zh-field-value zh-plane-type"><i>'+a[field_config[n][l].name]+"</i></span></div></td>";else if(-1!==field_config[n][l].name.indexOf("estimated_deptime")&&-1==field_config[n][l].name.indexOf("isd"))i+='<td><div class="zh-cell-wrap">'+j+'<input data-field-val="'+a[field_config[n][l].name]+'" data-field="'+field_config[n][l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n][l].name]+'" type="text"></div></td>';else if(-1!==field_config[n][l].name.indexOf("estimated_arrtime")&&-1==field_config[n][l].name.indexOf("isd"))i+='<td><div class="zh-cell-wrap">'+q+'<input data-field-val="'+a[field_config[n][l].name]+'" data-field="'+field_config[n][l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n][l].name]+'" type="text"></div></td>';else if(-1!==$.inArray(field_config[n][l].name,D))i+='<td><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[n][l].name]+'" data-field="'+field_config[n][l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n][l].name]+'" type="text"></div></td>';else if("aoc_info"==field_config[n][l].name)i+='<td><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[n][l].name]+'" data-field="'+field_config[n][l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n][l].name]+'" type="text"></div></td>';else if("release_situation"==field_config[n][l].name)i+='<td class="zh-bg-bgray"><div class="zh-cell-wrap">'+a.release_situation+a.release_situation_time+"</div></td>";else if("turnaround_time"==field_config[n][l].name)if(""==a.turnaround_time)i+='<td><div class="zh-cell-wrap"><span class="zh-field-value "></span></div></td>';else{var s=a.turnaround_time;-1!=s.indexOf("+")?i+='<td class="am-font-red"><div class="zh-cell-wrap"><span class="zh-field-value ">'+s+"</span></div></td>":i+='<td><div class="zh-cell-wrap"><span class="zh-field-value ">'+s+"</span></div></td>"}else i+='<td><div class="zh-cell-wrap"><span class="zh-field-value ">'+a[field_config[n][l].name]+"</span></div></td>"}),i+='<td class="show_fid"><div class="zh-cell-wrap"><a class="zh-field-value zh-edit" href="###">编辑</a><a class="zh-field-value zh-msg zh-ml-5" href="###">消息</a></div></td></tr>',$("#flight_list_"+a.insert_fid_below).after(i)});else{var d=["in_scheduled_deptime","in_estimated_deptime","in_actual_deptime","in_scheduled_arrtime","in_estimated_arrtime","in_actual_arrtime","out_scheduled_deptime","out_estimated_deptime","out_actual_deptime","out_scheduled_arrtime","out_estimated_arrtime","out_actual_arrtime","cobt","ctot"];$.each(e,function(e,a){var i="",s="",c="";1==a.is_attention&&(s="checked='checked'",c="active");var r="";"1"===a.in_is_vip&&(r='<span class="zh-vip-yellow">V</span>');var o="";1==a.in_is_meeting&&(o='<span class="zh-vip-yellow">M</span>');var h="",_="",f="";""!==a.in_fnum_share_tip&&(h="zh-tip-share",_='data-share="'+a.in_fnum_share_tip+'"',f="zh-text-black-bold");var u=a.in_second_state_str,p="",m="";1==a.in_es_arr_time_adsb&&(m='<i class="am-icon-A">A</i>'),1==a.in_es_dep_time_adsb&&(p='<i class="am-icon-A">A</i>'),i+='<tr id="'+e+'">',i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><label class="zh-fd-checkbox attention_id '+c+'"><input class="attention_flight" type="checkbox" name="attention" value="'+e+'" '+s+">"+a.id+"</label></div></td>",$.each(l[n].in,function(e,l){"in_fnum"==field_config[n].in[l].name?i+='<td class="'+a.in_flight_status_code_class+" "+h+'" '+_+'><div class="zh-cell-wrap"><a data-fid="'+a.in_fid+'" class="zh-field-value zh-flight-number '+f+'" href="###">'+a[field_config[n].in[l].name]+"</a>"+r+o+"</div></td>":"airport_lines"==field_config[n].in[l].name&&""!==a.in_fid?i+='<td class="zh-tip-share '+a.in_flight_status_code_class+'" data-share="'+a[field_config[n].in[l].name]+'"><div class="zh-cell-wrap"><a data-fid="'+a.in_fid+'" class="zh-field-value zh-airline" href="###">'+t(a[field_config[n].in[l].name])+"</a></div></td>":"in_flight_status_code"==field_config[n].in[l].name?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value">'+a[field_config[n].in[l].name]+"</span> "+u+"</div></td>":"in_process_status"==field_config[n].in[l].name?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><a target="_blank" href="'+a.in_process_detail_link+'" class="zh-field-value">'+a[field_config[n].in[l].name]+"</a></div></td>":"in_aircraft_num"==field_config[n].in[l].name?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><a data-flight-date="'+a.in_flight_date+'" data-aircraft-type="'+a.aircraft_type+'" class="zh-field-value zh-plane-number" href="###">'+a[field_config[n].in[l].name]+"</a></div></td>":"aircraft_type"==field_config[n].in[l].name&&""!==a.in_fid?i+='<td class="am-plane-type '+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value zh-plane-type"><i>'+a[field_config[n].in[l].name]+"</i></span></div></td>":-1!==field_config[n].in[l].name.indexOf("estimated_deptime")&&-1==field_config[n].in[l].name.indexOf("isd")?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap">'+p+'<input data-field-val="'+a[field_config[n].in[l].name]+'" data-field="'+field_config[n].in[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].in[l].name]+'" type="text"></div></td>':-1!==field_config[n].in[l].name.indexOf("estimated_arrtime")&&-1==field_config[n].in[l].name.indexOf("isd")?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap">'+m+'<input data-field-val="'+a[field_config[n].in[l].name]+'" data-field="'+field_config[n].in[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].in[l].name]+'" type="text"></div></td>':-1!==$.inArray(field_config[n].in[l].name,d)?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[n].in[l].name]+'" data-field="'+field_config[n].in[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].in[l].name]+'" type="text"></div></td>':"in_aoc_info"==field_config[n].in[l].name?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[n].in[l].name]+'" data-field="'+field_config[n].in[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].in[l].name]+'" type="text"></div></td>':""!==a.in_fid?i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+a[field_config[n].in[l].name]+"</span></div></td>":i+='<td class="'+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>'}),""!==a.in_fid?i+='<td data-fid="'+a.in_fid+'" class="show_fid '+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"><a class="zh-field-value zh-edit" href="###">编辑</a><a class="zh-field-value zh-msg zh-ml-5" href="###">消息</a></div></td>':i+='<td class="show_fid '+a.in_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>';var v="";"1"===a.out_is_vip&&(v='<span class="zh-vip-black">V</span>');var g="";1==a.out_is_meeting&&(g='<span class="zh-vip-black">M</span>');var z="",b="",y="";""!==a.out_fnum_share_tip&&(z="zh-tip-share",b='data-share="'+a.out_fnum_share_tip+'"',y="zh-text-black-bold");var x=a.out_second_state_str,k="",w="";1==a.out_es_arr_time_adsb&&(w='<i class="am-icon-A">A</i>'),1==a.out_es_dep_time_adsb&&(k='<i class="am-icon-A">A</i>'),$.each(l[n].out,function(e,l){if("out_fnum"==field_config[n].out[l].name)i+='<td class="'+a.out_flight_status_code_class+" "+z+'" '+b+'><div class="zh-cell-wrap"><a data-fid="'+a.in_fid+'" class="zh-field-value zh-flight-number '+y+'" href="###">'+a[field_config[n].out[l].name]+"</a>"+v+g+"</div></td>";else if("airport_lines"==field_config[n].out[l].name&&""!==a.out_fid)i+='<td class="zh-tip-share '+a.out_flight_status_code_class+'" data-share="'+a[field_config[n].out[l].name]+'"><div class="zh-cell-wrap"><a data-fid="'+a.out_fid+'" class="zh-field-value zh-airline" href="###">'+t(a[field_config[n].out[l].name])+"</a></div></td>";else if("out_flight_status_code"==field_config[n].out[l].name)i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value">'+a[field_config[n].out[l].name]+"</span> "+x+"</div></td>";else if("out_process_status"==field_config[n].out[l].name)i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><a target="_blank" href="'+a.out_process_detail_link+'" class="zh-field-value">'+a[field_config[n].out[l].name]+"</a></div></td>";else if("out_aircraft_num"==field_config[n].out[l].name)i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><a data-flight-date="'+a.out_flight_date+'" data-aircraft-type="'+a.aircraft_type+'" class="zh-field-value zh-plane-number" href="###">'+a[field_config[n].out[l].name]+"</a></div></td>";else if("aircraft_type"==field_config[n].out[l].name&&""!==a.out_fid)i+='<td class="am-plane-type '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value zh-plane-type"><i>'+a[field_config[n].out[l].name]+"</i></span></div></td>";else if(-1!==field_config[n].out[l].name.indexOf("estimated_deptime")&&-1==field_config[n].out[l].name.indexOf("isd"))i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap">'+k+'<input data-field-val="'+a[field_config[n].out[l].name]+'" data-field="'+field_config[n].out[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].out[l].name]+'" type="text"></div></td>';else if(-1!==field_config[n].out[l].name.indexOf("estimated_arrtime")&&-1==field_config[n].out[l].name.indexOf("isd"))i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap">'+w+'<input data-field-val="'+a[field_config[n].out[l].name]+'" data-field="'+field_config[n].out[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].out[l].name]+'" type="text"></div></td>';else if(-1!==$.inArray(field_config[n].out[l].name,d))i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[n].out[l].name]+'" data-field="'+field_config[n].out[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].out[l].name]+'" type="text"></div></td>';else if("out_aoc_info"==field_config[n].out[l].name)i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><input data-field-val="'+a[field_config[n].out[l].name]+'" data-field="'+field_config[n].out[l].name+'" class="zh-input-dynamic" readonly="readonly" value="'+a[field_config[n].out[l].name]+'" type="text"></div></td>';else if("release_situation"==field_config[n].out[l].name)i+='<td class="zh-bg-bgray '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap">'+a.release_situation+a.release_situation_time+"</div></td>";else if("turnaround_time"==field_config[n][l].name)if(""==a.turnaround_time)i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value "></span></div></td>';else{var s=a.turnaround_time;-1!=s.indexOf("+")?i+='<td class="am-font-red '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+s+"</span></div></td>":i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+s+"</span></div></td>"}else""!==a.out_fid?i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><span class="zh-field-value ">'+a[field_config[n].out[l].name]+"</span></div></td>":i+='<td class="'+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>'}),""!==a.out_fid?i+='<td data-fid="'+a.out_fid+'" class="show_fid '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"><a class="zh-field-value zh-edit" href="###">编辑</a><a class="zh-field-value zh-msg zh-ml-5" href="###">消息</a></div></td>':i+='<td class="show_fid '+a.out_flight_status_code_class+'"><div class="zh-cell-wrap"></div></td>',i+="</tr>",$("#"+a.insert_fid_below).after(i)})}i()}(e.add,l,d),void 0!==e.del&&""!=e.del&&(s=e.del,"all"!==(-1!==(n=l.f_status).indexOf("in")?"in":-1!==n.indexOf("out")?"out":-1!==n.indexOf("all")?"all":n)?$.each(s,function(t,e){$("#flight_list_"+t).remove()}):$.each(s,function(t,e){$("#"+t).remove()}),i())}function s(){var t="";return $(".zh-opt-count li").each(function(){$(this).hasClass("active")&&(t=$(this).children("a").attr("type"))}),t}function n(t){m(t.f_status+"_attr_cookie",t.f_attr.join(",")+"|"+t.f_vip.join(",")+"|"+t.f_status_code.join(",")+"|"+t.in_f_attr.join(",")+"|"+t.in_f_vip.join(",")+"|"+t.in_f_status_code.join(",")+"|"+t.out_f_attr.join(",")+"|"+t.out_f_vip.join(",")+"|"+t.out_f_status_code.join(",")+"|"+t.f_release.join(","))}function d(t){if(null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort(),void 0!==t.list_type)if(0==in_out_all_flag)for(var e=0;e<6;e++)-1==$.inArray(e.toString(),t.list_type)?$(".zh-opt-count li").eq(e).addClass("hide"):$(".zh-opt-count li").eq(e).removeClass("hide");else for(e=2;e<6;e++)-1==$.inArray(e.toString(),t.list_type)?$(".zh-opt-count li").eq(e).addClass("hide"):$(".zh-opt-count li").eq(e).removeClass("hide");if(0==in_out_all_flag)var a=["进港：","出港：","不正常：","关注：","航食责任：","会议："];else a=["进出港：","不正常：","关注：","航食责任：","会议："];if(1==t.init&&($(".zh-loading-box").removeClass("hide"),-1!==t.f_status.indexOf("in")?a[0]=all_title_arr[t.f_status]+"：":-1!==t.f_status.indexOf("out")?a[1]=all_title_arr[t.f_status]+"：":-1!==t.f_status.indexOf("all")?a[0]=all_title_arr[t.f_status]+"：":-1!==t.f_status.indexOf("food")&&(a[a.length-2]=all_title_arr[t.f_status]+"："),"cmd"!==t.f_status&&$(".zh-opt-count li a").each(function(t){$(this).html(a[t]+'<span class="zh-refresh"></span>')})),"cmd"==t.f_status){var i=GET_CMD_FLIGHT_LIST_URL;t.page_hash=PAGE_HASH}else i=GET_FLIGHT_LIST_URL;ajax_request=$.ajax({type:"POST",dataType:"json",data:t,url:i,cache:!1,timeout:6e4,beforeSend:function(){1==t.init&&(ajax_lock=!0)},success:function(e){if(1==t.init&&"cmd"==t.f_status&&$.isEmptyObject(e.init)&&($(".zh-loading-box").addClass("hide"),$(".flight-list-table thead,.flight-list-table tbody").empty(),$(".flight-list-table tbody").html('<p class="zh-empty-tip">暂无查询结果,请重新查询</p>'),ajax_lock=!1,$(".zh-opt-count li:not(.hide)").removeClass("active")),void 0!==e.count){if(0==in_out_all_flag)var a=[e.count.in,e.count.out,e.count.abnormal,e.count.attention,e.count.food,e.count.meet];else a=[e.count.all,e.count.abnormal,e.count.attention,e.count.food,e.count.meet];0==in_out_all_flag?li_type_arr=["in_0","out_0","abnormal","attention","food_0","meet"]:li_type_arr=["all_0","abnormal","attention","food_0","meet"],$(".zh-opt-count li a").each(function(e){$(this).find("span").removeClass("zh-refresh").text(a[e]),"in_0"==li_type_arr[e]?-1==t.f_status.indexOf("in")&&$(this).attr("type",li_type_arr[e]):"out_0"==li_type_arr[e]?-1==t.f_status.indexOf("out")&&$(this).attr("type",li_type_arr[e]):"food_0"==li_type_arr[e]?-1==t.f_status.indexOf("food")&&$(this).attr("type",li_type_arr[e]):$(this).attr("type",li_type_arr[e])})}$(".zh-loading-box").addClass("hide"),"cmd"==t.f_status?($(".zh-opt-count li").each(function(t){$(this).removeClass("active")}),void 0!==e.count&&$(".flight-count").html("*共"+e.count.total+"条航班列表")):(!1===$(".zh-fd-header .zh-opt-count li:not(.hide)").hasClass("active")&&$(".zh-fd-header .zh-opt-count li:not(.hide):first").addClass("active"),$(".flight-count").html("*共0条航班列表")),l(e,t),0==in_out_all_flag?li_type_arr=["in_0","out_0","abnormal","attention","food_0","meet"]:li_type_arr=["all_0","abnormal","attention","food_0","meet"],ajax_lock=!1,fdListTheadFixFn($(".zh-fd-list")),1==t.init&&($(".zh-thead-fix .zh-table thead").css("position","static"),$(".zh-fd-list").scrollTop(0)),"cmd"!=t.f_status?0==ajax_lock&&(null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort(),t.init=0,t.pid=(new Date).getTime(),ajax_request=null,null!=ajax_timer&&clearTimeout(ajax_timer),ajax_timer=setTimeout(function(){d(t)},time_interval)):(null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort(),t.init=0,t.pid=(new Date).getTime(),ajax_request=null,null!=ajax_timer&&clearTimeout(ajax_timer),ajax_timer=setTimeout(function(){d(t)},time_interval))},complete:function(t,e){null},error:function(){}})}function c(t){if(t.length<3)return layer.msg("请输入不少于三位字符的指令",{time:2e3}),!1;var e=$("#startTime").val(),a=$("#endTime").val(),i={init:1,pid:(new Date).getTime(),cmd:t,start_time:e,end_time:a,f_status:"cmd"};null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort(),v("cmd_attr_cookie"),d(i)}Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var r=[],o=localStorage.getItem("historyInstructions");function h(){var t=r.length,e="";if(0==t){var a=$.trim($("#zhInstuction input").val());a.length>0&&(r.push(a),localStorage.setItem("historyInstructions",r),e+="<li>"+a+"</li>")}else for(var i=t-1;i>=0;i--)e+="<li>"+r[i]+"</li>";$(".zh-instruction-history>ul").html(e)}function _(t){$(t).addClass("am_updateRow"),setTimeout(function(){setTimeout(function(){$(t).removeClass("am_updateRow")},100)},1e3)}function f(){var t={type:1,pid:(new Date).getTime(),page_hash:PAGE_HASH};$.ajax({type:"POST",dataType:"json",data:t,url:GET_FLIGHT_LIST_SOON_URL,cache:!1,timeout:6e4,success:function(t){void 0!==t.count&&$("#in_flight_count").html("进港动态("+t.count+")"),void 0!==t.data.add&&$.each(t.data.add,function(t,e){var a="";1==e.is_vip&&(a='<span class="am_statusIcon zh-vip-yellow">V</span>');var i='<tr class="flight_'+e.fid+'">';i+='<td style="cursor:pointer;" class="soon_fnum">'+a+e.fnum+"</td>",i+="<td>"+e.aircraft_num+"</td>",i+='<td><span class="am_statusIcon am_yuIcon">预</span>'+e.estimated_arrtime+"</td>",i+="<td>"+e.flight_status_code_cn+"</td>",i+="</tr>",""==e.insert_fid_below?$(".in-flight tbody").prepend(i):$(".in-flight tbody").find(".flight_"+e.insert_fid_below).after(i),_(".flight_"+e.fid)}),void 0!==t.data.del&&$.each(t.data.del,function(t,e){$(".in-flight tbody").find(".flight_"+e).remove()}),void 0!==t.data.update&&""!=t.data.update&&$.each(t.data.update,function(t,e){void 0!=e.flight_status_code_cn&&$(".flight_"+t+" td").eq(3).html('<span class="zh-text-red-bold">'+e.flight_status_code_cn+"</span>"),void 0!=e.estimated_arrtime&&$(".flight_"+t+" td").eq(2).html('<span class="am_statusIcon am_yuIcon">预</span><span class="zh-text-red-bold">'+e.estimated_arrtime+"</span>"),_(".flight_"+t)}),setTimeout(f,2e4)},complete:function(t,e){null},error:function(){}})}function u(){var t={type:0,pid:(new Date).getTime(),page_hash:PAGE_HASH};$.ajax({type:"POST",dataType:"json",data:t,url:GET_FLIGHT_LIST_SOON_URL,cache:!1,timeout:6e4,success:function(t){void 0!==t.count&&$("#out_flight_count").html("出港动态("+t.count+")"),void 0!==t.data.add&&$.each(t.data.add,function(t,e){var a="";1==e.is_vip&&(a='<span class="am_statusIcon zh-vip-black">V</span>');var i='<tr class="flight_'+e.fid+'">';i+='<td style="cursor:pointer;" class="soon_fnum">'+a+e.fnum+"</td>",i+="<td>"+e.aircraft_num+"</td>",i+='<td><span class="am_statusIcon am_yuIcon">预</span>'+e.estimated_deptime+"</td>",i+="<td>"+e.flight_status_code_cn+"</td>",i+="</tr>",""==e.insert_fid_below?$(".out-flight tbody").prepend(i):$(".out-flight tbody").find(".flight_"+e.insert_fid_below).after(i),_(".flight_"+e.fid)}),void 0!==t.data.del&&$.each(t.data.del,function(t,e){$(".out-flight tbody").find(".flight_"+t).remove()}),void 0!==t.data.update&&""!=t.data.update&&$.each(t.data.update,function(t,e){void 0!=e.flight_status_code_cn&&$(".flight_"+t+" td").eq(3).html('<span class="zh-text-red-bold">'+e.flight_status_code_cn+"</span>"),void 0!=e.estimated_deptime&&$(".flight_"+t+" td").eq(2).html('<span class="am_statusIcon am_yuIcon">预</span><span class="zh-text-red-bold">'+e.estimated_deptime+"</span>"),_(".flight_"+t)}),setTimeout(u,2e4)},complete:function(t,e){null},error:function(){}})}function p(t){var e,a=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(a))?unescape(e[2]):null}function m(t,e){var a=new Date;a.setTime(a.getTime()+2592e6),document.cookie=t+"="+escape(e)+";expires="+a.toGMTString()}function v(t){var e=new Date;e.setTime(e.getTime()-1);var a=p(t);null!=a&&(document.cookie=t+"="+a+";expires="+e.toGMTString())}function g(){msg_request=$.ajax({type:"GET",dataType:"json",data:{init:0},url:GET_FEEDBACK_MSG_URL,cache:!1,timeout:6e4,success:function(t){if(0==t.code){var e=p("user_default_airport"),a=0,i="";$.each(t.data,function(t,l){var s="",n=l.info_id;for(var d in msg_object[n]={from:{department:l.from_department_confirm_info.department,truename:l.from_department_confirm_info.truename,send_time:l.send_time,msg_type:"事务催办"},to:[],content:l.content,need_confirm:l.need_confirm},l.to_department_confirm_info)msg_object[n].to.push({to_department_cn:l.to_department_confirm_info[d].to_department_cn,confirmed_status:l.to_department_confirm_info[d].confirmed_status,confirmed_time:l.to_department_confirm_info[d].confirmed_time});if(a++,0==t&&(s='class="zh-bg-light-yellow"'),null==l.flight)var c="",r="",o="",h="",_="";else{c=l.flight.fnum,r=l.flight.aircraft_num,o=l.flight.parking;if(l.flight.forg_iata==e)_="进",h=l.flight.fdst_cn;else _="出",h=l.flight.forg_cn}var f=new Date;f.setTime(1e3*l.send_time);var u="<tr "+s+' data="'+n+'">';u+="<td>"+f.Format("yyyy/MM/dd hh:mm")+"</td>",u+='<td><span class="am_ellipsis" style="width:64px;">'+c+"</span></td>",u+='<td><span class="am_ellipsis" style="width:50px;">'+r+"</span></td>",u+='<td><span class="am_ellipsis" style="width:34px;">'+o+"</span></td>",u+='<td><span class="am_ellipsis" style="width:64px;">'+h+"</span></td>",u+="<td>"+_+"</td>",u+="<td>事务催办</td>",u+='<td><span class="zh-department" style="max-width:300px;" data-title="'+l.content+'">'+l.content+"</span></td>",u+='<td><span class="zh-department" data-title="'+l.from_department_confirm_info.department+'">'+l.from_department_confirm_info.department+"</span></td>",u+='<td><span class="zh-department" data-title="'+l.to_department_confirm_info[0].to_department_cn+'">'+l.to_department_confirm_info[0].to_department_cn+"</span></td>";l.info_type;"receive"==l.info_type?1==l.need_confirm?2==l.info_confirmed_status?u+='<td><a href="###" class="zh-confirm selected">已确认</a></td>':1==l.info_confirmed_status&&(u+='<td><a data-id="'+l.info_object_id+'" href="###" class="zh-confirm">确认</a></td>'):u+="<td><span>已接收</span></td>":1==l.need_confirm?2==l.info_confirmed_status?u+="<td><span>已确认</span></td>":1==l.info_confirmed_status&&(u+="<td><span>待确认</span></td>"):u+="<td><span>已发送</span></td>",i+=u}),""!=i&&($(".feed_back_msg tbody").html(i),a>0&&$(".zh-transaction-heading h3").html("事务消息("+a+")"))}}})}function z(){msg_request=$.ajax({type:"GET",dataType:"json",data:{init:1},url:GET_FEEDBACK_MSG_URL,cache:!1,timeout:6e4,success:function(t){if(0==t.code){var e=p("user_default_airport"),a=0,i="";$.each(t.data,function(t,l){var s=l.info_id;for(var n in msg_object[s]={from:{department:l.from_department_confirm_info.department,truename:l.from_department_confirm_info.truename,send_time:l.send_time,msg_type:"事务催办"},to:[],content:l.content,need_confirm:l.need_confirm},l.to_department_confirm_info)msg_object[s].to.push({to_department_cn:l.to_department_confirm_info[n].to_department_cn,confirmed_status:l.to_department_confirm_info[n].confirmed_status,confirmed_time:l.to_department_confirm_info[n].confirmed_time});a++;var d="";if(0==t&&(d='class="zh-bg-light-yellow"'),null==l.flight)var c="",r="",o="",h="",_="";else{c=l.flight.fnum,r=l.flight.aircraft_num,o=l.flight.parking;if(l.flight.forg_iata==e)_="出",h=l.flight.fdst_cn;else _="进",h=l.flight.forg_cn}var f=new Date;f.setTime(1e3*l.send_time);var u="<tr "+d+' data="'+s+'">';u+="<td>"+f.Format("yy/MM/dd hh:mm")+"</td>",u+='<td><span class="am_ellipsis" style="width:64px;">'+c+"</span></td>",u+='<td><span class="am_ellipsis" style="width:50px;">'+r+"</span></td>",u+='<td><span class="am_ellipsis" style="width:34px;">'+o+"</span></td>",u+='<td><span class="am_ellipsis" style="width:64px;">'+h+"</span></td>",u+="<td>"+_+"</td>",u+="<td>事务催办</td>",u+='<td><span class="zh-department" style="max-width:300px;" data-title="'+l.content+'">'+l.content+"</span></td>",u+='<td><span class="zh-department" data-title="'+l.from_department_confirm_info.department+'">'+l.from_department_confirm_info.department+"</span></td>",u+='<td><span class="zh-department" data-title="'+l.to_department_confirm_info[0].to_department_cn+'">'+l.to_department_confirm_info[0].to_department_cn+"</span></td>";l.info_type;"receive"==l.info_type?1==l.need_confirm?2==l.info_confirmed_status?u+='<td><a href="###" class="zh-confirm selected">已确认</a></td>':1==l.info_confirmed_status&&(u+='<td><a data-id="'+l.info_object_id+'" href="###" class="zh-confirm">确认</a></td>'):u+="<td><span>已接收</span></td>":1==l.need_confirm?2==l.info_confirmed_status?u+="<td><span>已确认</span></td>":1==l.info_confirmed_status&&(u+="<td><span>待确认</span></td>"):u+="<td><span>已发送</span></td>",i+=u}),$(".feed_back_msg tbody").html(i),$(".zh-transaction-heading h3").html("事务消息("+a+")"),setTimeout(function(){$(".feed_back_msg tbody tr").eq(0).removeClass("zh-bg-light-yellow")},5e3),msg_timer=setInterval(g,4e4)}}})}function b(t,e,a){var i='<tr class="flight_data_'+a.fid+'">';return $.each(t,function(t,l){i+="<td>"+a[field_config[e][l].name]+"</td>"}),i+='<td><a data-fid="'+a.fid+'" class="zh-edit" href="###">编辑</a><a data-fid="'+a.fid+'" class="zh-msg zh-ml-5" href="###">消息</a></td>',i+="</tr>"}function y(){flight_data_request=$.ajax({type:"GET",dataType:"json",data:flight_param,url:"/flight/flight_data/index",cache:!1,timeout:6e4,success:function(t){var e,a,i,l=$(".am-flight-wrap");if(l.length>0){l.find("li").eq(0).find("span").text(t.count.depart),l.find("li").eq(1).find("span").text(t.count.stop);var s=l.children(".am-flight-cont").find("tbody"),n=t.field_list,d=t.cur_tab;if(0==$.isEmptyObject(t.init)){var c=(e=n,a=d,i="<tr>",$.each(e,function(t,e){i+="<th>"+field_config[a][e].cn_name+"</th>"}),i+="<th>操作</th></tr>");l.children(".am-flight-cont").find("thead").html(c);var r="";$.each(t.init,function(t,e){r+=b(n,d,e)}),s.html(r)}0==$.isEmptyObject(t.add)&&$.each(t.add,function(t,e){if($(".flight_data_"+t).length>0)return!1;var a=b(n,d,e);$(".flight_data_"+e.insert_fid_below).after(a)}),0==$.isEmptyObject(t.update)&&($.each(n[d],function(t,e){field_map[d][field_config[d][e].name]=t}),$.each(t.update,function(t,e){var a=$(".flight_data_"+t);$.each(e,function(t,e){var i=field_map[d][t];a.children("td").eq(i).html(e)})})),0==$.isEmptyObject(t.del)&&$.each(t.del,function(t){$(".flight_data_"+t).length>0&&$(".flight_data_"+t).remove()})}fdListTheadFixFn($(".am-flight-table")),clearTimeout(flight_data_timer),flight_data_timer=setTimeout(function(){flight_param.init=0,y()},2e4)},complete:function(t,e){null},error:function(){}})}o&&(r=o.split(",")),h(),$(".zh-instruction-history>ul").on("click","li",function(t){t.stopPropagation(),$("#zhInstuction input").val($(this).text()),$(".zh-instruction-history").removeClass("active"),c($(this).text())}),$(".zh-instruction-history>.zh-title .zh-clear").click(function(t){t.stopPropagation(),$(".zh-instruction-history>ul").html(""),r=[],localStorage.removeItem("historyInstructions")}),$("#zhInstuction input").on("keyup",function(){$.trim($(this).val()).length>0?$(this).siblings(".zh-fd-btn").addClass("active"):$(this).siblings("button").removeClass("active")}),$("#zhInstuction button").click(function(){$(this).removeClass("active")}),$("#zhInstuction input").focus(function(t){t.stopPropagation(),$(".zh-instruction-history").addClass("active")}).click(function(t){t.stopPropagation()}),$("body").click(function(){$(".zh-instruction-history").removeClass("active")}),this.init=function(){var t,a,i,l;window.all_title_arr={in_0:"进港",in_1:"前站计划",in_2:"前站起飞",in_3:"到达本场",in_4:"预计停场",out_0:"出港",out_1:"出港计划",out_2:"出港已飞",out_3:"始发航班",food_0:"航食责任",food_1:"航食计划",food_2:"航食已飞",food_3:"航食始发",all_0:"进出港",all_1:"前站计划",all_2:"前站起飞",all_3:"到达本场",all_4:"出港计划",all_5:"出港已飞"},window.flight_status_code_cn=["返航","正在返航","备降","正在备降"],0==in_out_all_flag?window.li_type_arr=["in_0","out_0","abnormal","attention","food_0","meet"]:window.li_type_arr=["all_0","abnormal","attention","food_0","meet"],msg_object={},window.time_interval=500,ajax_lock=!1,ajax_request=null,ajax_timer=null,msg_request=null,msg_timer=null,window.flight_data_request=null,window.flight_param={},window.flight_data_timer=null,field_map={in:{},out:{},abnormal:{},attention:{},cmd:{},food:{},all:{in:{},out:{}},depart:{},stop:{}},(t=new Date).getFullYear(),a=t.getMonth()+1,i=t.getDate(),l=t.getHours(),a=a<10?"0"+a:a,i=i<10?"0"+i:i,l=l<10?"0"+l:l,$("#startTime, #endTime").datetimepicker({format:"yyyy-mm-dd hh:ii",language:"zh-CN",weekStart:1,autoclose:!0,todayHighlight:1,startView:2,minView:1});var o="in_0";1==in_out_all_flag&&(o="all_0");var _,g,b={init:1,is_first:1,pid:(new Date).getTime(),f_status:o,page_hash:PAGE_HASH};function x(t,e,a){$(t).datetimepicker("remove"),$(t).datetimepicker({format:e,language:"zh-CN",weekStart:1,autoclose:!0,todayHighlight:1,startView:a,minView:a,forceParse:0})}_=null,$("body").on("click",".zh-layer-table .zh-order-asc",function(){if(!$(this).hasClass("disable")){null!==_&&clearTimeout(_);var t=$(this).parent().siblings().eq(1).text(),e=$(this).parents("tr").prev().children().eq(1).text(),a=$(this).parents("tr").attr("data-flight-status"),i=$(this).parents("tr").prev().attr("data-flight-status");$(this).parent().siblings().eq(1).text(e).parent().addClass("zh-bg-flash-gray").attr("data-flight-status",i),$(this).parents("tr").prev().addClass("zh-bg-flash-gray").attr("data-flight-status",a).children().eq(1).text(t),_=setTimeout(function(){$(".zh-layer-table tbody tr").removeClass("zh-bg-flash-gray")},1e3)}}),$("body").on("click",".zh-layer-table .zh-order-desc",function(){if(!$(this).hasClass("disable")){null!==_&&clearTimeout(_);var t=$(this).parent().siblings().eq(1).text(),e=$(this).parents("tr").next().children().eq(1).text(),a=$(this).parents("tr").attr("data-flight-status"),i=$(this).parents("tr").next().attr("data-flight-status");$(this).parent().siblings().eq(1).text(e).parent().addClass("zh-bg-flash-gray").attr("data-flight-status",i),$(this).parents("tr").next().addClass("zh-bg-flash-gray").attr("data-flight-status",a).children().eq(1).text(t),_=setTimeout(function(){$(".zh-layer-table tbody tr").removeClass("zh-bg-flash-gray")},1e3)}}),$(".zh-fd-header .zh-opt-count li:first").addClass("active"),$("body").on("click",".zh-fd-header .zh-opt-count li",function(t){t.stopPropagation(),$("#zhInstuction").find("input").val(""),$(".zh-loading-box").removeClass("hide"),$(".zh-fd-list").animate({scrollTop:1},0),ajax_lock=!1,null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort(),b.page=1,$(this).addClass("active").siblings().removeClass("active on");var e=$(this).children("a").attr("type");b.init=1,b.is_first=1,b.f_attr=null,b.f_vip=null,b.f_status_code=null,b.f_status=e,v(e+"_attr_cookie"),void 0!==b.order_field&&delete b.order_field,void 0!==b.order_type&&delete b.order_type,d(b)}),$("body").on("click",".zh-fd-header .zh-opt>li .zh-arrow",function(t){t.stopPropagation(),$(".zh-fd-header .zh-opt>li").removeClass("on");var e=$(this).parent();return e.hasClass("on")?e.removeClass("on"):e.addClass("on"),!1}),$("body").click(function(){$(".zh-fd-header .zh-opt>li").removeClass("on")}),$(".am-flight-tab li").on("click",function(){var t=$(this).index();$(this).addClass("active").siblings("li").removeClass("active"),0==t?(flight_param.init=1,flight_param.type="depart",null!=flight_data_timer&&clearTimeout(flight_data_timer),y()):(flight_param.init=1,flight_param.type="stop",null!=flight_data_timer&&clearTimeout(flight_data_timer),y())}),$("body").on("click",".zh-fd-header .zh-opt li .zh-dropdown .zh-item",function(t){t.stopPropagation(),$(this).addClass("active").siblings().removeClass("active").parents("li").addClass("active").removeClass("on").siblings().removeClass("active on");var e=$(this).clone().remove("span").text();"全部进港"==e?e="进港":"全部出港"==e?e="出港":"全部"==e?e="进出港":"全部航食"==e&&(e="航食责任");var a=$(this).attr("type");$(this).parent().siblings("a").attr("type",a).html(e+"：<span></span>"),b.init=1,b.f_status=$(this).attr("type"),void 0!==b.order_field&&delete b.order_field,void 0!==b.order_type&&delete b.order_type,d(b)}),$(".zh-date-range button").click(function(){var t=$("#startTime").val(),e=$("#endTime").val(),a=s();if(""==a){a="cmd";var i=$("#zhInstuction").find("input").val();b.cmd=i}v(a+"_attr_cookie"),b.init=1,b.f_status=a,b.start_time=t,b.end_time=e,d(b)}),$(".zh-fd-list").on("dblclick",".zh-input-dynamic",function(){if(0==EDIT_PERMISSION)return!1;$(this).addClass("active").removeAttr("readonly");var t=$(this).val();if("--"==t||""==t){var e="("+(new Date).Format("dd")+")";$(this).val(e)}}).on("blur",".zh-input-dynamic",function(){$(this).removeClass("active").attr("readonly","readonly"),$(this).parents("td").hasClass("zh-tip-share")&&$(this).parents("td").data("share",$.trim($(this).val()));var t=$(this),e=$.trim($(this).val()),a=$(this).data("field-val"),i=$(this).data("field");if("cobt"!=i&&"ctot"!=i&&""==e)return $(this).val(a),!1;if(e==a)return!1;if("aoc_info"!==i)if("cobt"!==i&&"ctot"!==i){if(!/^\d{4}\(\d{2}\)$/.test(e))return layer.msg("请输入正确的时间格式",{time:1e3}),$(this).val(a),!1;var l=e.substr(0,2),s=e.substr(2,2);if(parseInt(l)>23||parseInt(s)>59)return layer.msg("请输入正确的时间格式",{time:1e3}),$(this).val(a),!1}else if(""!==e){if(!/^\d{4}\(\d{2}\)$/.test(e))return layer.msg("请输入正确的时间格式",{time:1e3}),$(this).val(a),!1;l=e.substr(0,2),s=e.substr(2,2);if(parseInt(l)>23||parseInt(s)>59)return layer.msg("请输入正确的时间格式",{time:1e3}),$(this).val(a),!1}var n={update_val:e,fid:$(this).parents("tr").find("td:eq(0)").find("input").val(),field_name:i};$.ajax({type:"POST",dataType:"json",data:n,url:"/flight/flight_list/up_field_val",success:function(e){0!=e.code&&(t.val(a),layer.confirm('<strong style="display:block;text-align:center;">'+e.msg+"</strong>",{title:"<strong>提示</strong>",btn:["确定","取消"]}))}})}),$.checkboxFn({ele:".zh-fd-checkbox",evtType:"mousedown"},function(){if($(this).siblings(".zh-checkbox-all").size()>0){var t=$(this).hasClass("active")?1:0,e=$(this).siblings(".zh-fd-checkbox").size();$(this).siblings(".zh-fd-checkbox.active:not(.zh-checkbox-all)").size()+t==e?$(this).siblings(".zh-checkbox-all").addClass("active").children("input").attr("checked","checked"):$(this).siblings(".zh-checkbox-all").removeClass("active").children("input").removeAttr("checked")}$(this).closest(".zh-draggable-list").size()>0&&setTimeout(function(){if($(this).hasClass("zh-checkbox-all")||($(this).hasClass("active")?$(this).parent().addClass("draggable"):$(this).parent().removeClass("draggable")),$(this).parent().siblings().children(".zh-checkbox-all").size()>0){var t=$(this).hasClass("active")?1:0,e=$(this).parent().siblings().children(".zh-fd-checkbox").size();$(this).parent().siblings().children(".zh-fd-checkbox.active:not(.zh-checkbox-all)").size()+t==e?$(this).parent().siblings().children(".zh-checkbox-all").addClass("active").children("input").attr("checked","checked"):$(this).parent().siblings().children(".zh-checkbox-all").removeClass("active").children("input").removeAttr("checked")}}.bind(this),100)}),$("body").on("click",".zh-checkbox-all",function(){0==$(this).parents(".zh-draggable-list").size()?$(this).hasClass("active")?$(this).siblings(".zh-fd-checkbox").addClass("active").children("input").attr("checked","checked"):$(this).siblings(".zh-fd-checkbox").removeClass("active").children("input").removeAttr("checked"):$(this).hasClass("active")?$(this).parent().siblings().children(".zh-fd-checkbox").addClass("active").children("input").attr("checked","checked"):$(this).parent().siblings().children(".zh-fd-checkbox").removeClass("active").children("input").removeAttr("checked")}),$.radioFn({ele:".zh-fd-radio"},function(){if($(this).next(".zh-custom-time").size()>0&&$(this).hasClass("active")?$(this).next(".zh-custom-time").children("input").removeAttr("readonly"):$(this).siblings(".zh-custom-time").children("input").attr("readonly","readonly"),$(this).hasClass("am-radio-traffic")){var t=$(this).index();$(".am-panel-traffic").eq(t).removeClass("hide").siblings(".am-panel-traffic").addClass("hide"),"进出港"==$.trim($(this).text())&&$(".am-panel-traffic").removeClass("hide")}}),$("body").on("click",".am-export-tab li",function(){var t=$(".am-export-tab li").index($(this));$(this).addClass("active").siblings().removeClass("active"),$(".am-export-tab-cont").eq(t).removeClass("hide").siblings(".am-export-tab-cont").addClass("hide")}),e(),$("body").on("click",".zh-confirm",function(t){t.stopPropagation();var e=$(this);if("已确认"==e.text())return!1;if(0==CONFIRM_MSG_PERMISSION)return show_no_permission(),!1;layer.msg("确认中,请稍候...",{time:0});var a=e.data("id");void 0!=a&&$.ajax({type:"POST",dataType:"json",data:{info_object_id:a},url:CONFIRM_MSG_URL,cache:!1,timeout:6e4,success:function(t){0==t.code&&(layer.msg("已确认",{time:1e3}),e.parent().html('<a href="###" class="zh-confirm selected">已确认</a>'))}})}),$.customSelectFn(".zh-fd-select:not(.am-delay-cause)","input:not(:hidden)","ul","li",function(){if($(this).parents("ul").siblings(":hidden").val($(this).data("sort")),$(this).parents(".zh-fd-select").hasClass("zh-fd-reason")){if(0==$(this).parents("ul").data("permission")){if(show_no_permission(),"无"==(e=$(this).parents("ul").data("value"))||"自定义"==e){var t=e;e="",$(".zh-fd-reason>.zh-input").val(t)}else $(".zh-fd-reason>.zh-input").val(e);return $("input[name='CAACCode']").val(e),!1}"无"!==$.trim($(this).text())?$("#delayReason").removeClass("hide"):$("#delayReason").addClass("hide")}else if($(this).parents(".zh-fd-select").hasClass("zh-fd-reason2")){if(0==$(this).parents("ul").data("permission")){var e;if(show_no_permission(),"无"==(e=$(this).parents("ul").data("value"))||"自定义"==e){t=e;e="",$(".zh-fd-reason2>.zh-input").val(t)}else $(".zh-fd-reason2>.zh-input").val(e);return $("input[name='CAACCode2']").val(e),!1}"无"!==$.trim($(this).text())?$("#delayReason2").removeClass("hide"):$("#delayReason2").addClass("hide")}if($(this).attr("data-custom")){var a=$(this).data("custom");$(this).parents(".zh-fd-select").next('.am-custom-field[data-field="'+a+'"]').removeClass("hide")}else $(this).parents(".zh-fd-select").next(".am-custom-field").addClass("hide");if($(this).parents(".zh-fd-select").is(".am-date-select")){var i=new Date,l=i.getFullYear(),s=i.getMonth()+1,n=i.getDate();switch(s=s<10?"0"+s:s,n=n<10?"0"+n:n,$.trim($(this).text())){case"按日":$("#startDate,#endDate").val(l+"-"+s+"-"+n),x("#startDate,#endDate","yyyy-mm-dd",2);break;case"按月":$("#startDate,#endDate").val(l+"-"+s),x("#startDate,#endDate","yyyy-mm",3)}}}),$("body").on("click",".attention_id input",function(t){t.stopPropagation();var e=$(this),a=$(this).val();if($(this).parent().hasClass("active"))var i=ADD_FLIGHT_ATTENTION_URL;else i=CANCLE_FLIGHT_ATTENTION_URL;var l="";$(".zh-opt-count li").each(function(){$(this).hasClass("active")&&(l=$(this).children("a").attr("type"))});var s=$("#startTime").val(),n=$("#endTime").val();$.ajax({type:"POST",dataType:"json",data:{fid:a,start_time:s,end_time:n},url:i,cache:!1,timeout:6e4,success:function(t){if(0==t.code){var a=t.count;$(".zh-opt-count a").each(function(){"attention"==$(this).attr("type")&&$(this).html("关注：<span>"+a+"</span>")}),"attention"===l&&e.parent().parent().parent().parent().remove()}}})}),$("body").on("click",".flight_attribute",function(t){t.preventDefault(),null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort();var e=$(this),a=$(this).parent().index(),i=s();""==i&&(i="cmd");var l=0,c=e.find("input").attr("name");if(-1!==c.indexOf("in")){var r=$("input[name='in_f_attr[]']:checked");l=1}else-1!==c.indexOf("out")?(r=$("input[name='out_f_attr[]']:checked"),l=2):r=$("input[name='f_attr[]']:checked");if(0!==a){if(e.parent().parent().children("li").eq(0).children("label").removeClass("active").children("input").removeAttr("checked"),void 0==e.children("input").attr("checked")){var o=e.children("input").val(),h=p(i+"_attr_cookie");if(h){var _=h.split("|");if(0==l)var f=_[0];else f=1==l?_[3]:_[6];var u=f.split(",");o=parseInt(o),-1!==$.inArray(o,u)&&(o+="",a=u.indexOf(o),u.splice(a,1),f=u.join(",")),m(i+"_attr_cookie",0==l?f+"|"+_[1]+"|"+_[2]+"|"+_[3]+"|"+_[4]+"|"+_[5]+"|"+_[6]+"|"+_[7]+"|"+_[8]:1==l?_[0]+"|"+_[1]+"|"+_[2]+"|"+f+"|"+_[4]+"|"+_[5]+"|"+_[6]+"|"+_[7]+"|"+_[8]:_[0]+"|"+_[1]+"|"+_[2]+"|"+_[3]+"|"+_[4]+"|"+_[5]+"|"+f+"|"+_[7]+"|"+_[8]),0==r.length&&(e.parent().parent().children("li").eq(0).children("label").addClass("active").children("input").attr("checked","checked"),v(i+"_attr_cookie"))}}}else e.parent().parent().children("li").each(function(t){0!==t&&($(this).children("label").removeClass("active").children("input").removeAttr("checked"),v(i+"_attr_cookie"))});var g=[];$("input[name='f_attr[]']").each(function(){$(this).parent().hasClass("active")&&g.push($(this).val())});var z=[];$("input[name='in_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&z.push($(this).val())});var b=[];$("input[name='out_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&b.push($(this).val())});var y=[];$("input[name='f_vip[]']").each(function(){$(this).parent().hasClass("active")&&y.push($(this).val())});var x=[];$("input[name='in_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&x.push($(this).val())});var k=[];$("input[name='out_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&k.push($(this).val())});var w=[];$("input[name='f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&w.push($(this).val())});var C=[];$("input[name='in_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&C.push($(this).val())});var T=[];$("input[name='out_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&T.push($(this).val())});var A=[];if($("input[name='f_release_situation[]']").each(function(){$(this).parent().hasClass("active")&&A.push($(this).val())}),g.length>0||z.length>0||b.length>0){n({f_attr:g,f_vip:y,f_status_code:w,in_f_attr:z,in_f_vip:x,in_f_status_code:C,out_f_attr:b,out_f_vip:k,out_f_status_code:T,f_release:A,f_status:i});var S={init:1,start_time:$("#startTime").val(),end_time:$("#endTime").val(),pid:(new Date).getTime(),f_status:i,page:1,f_attr:g,f_vip:y,f_status_code:w,in_f_attr:z,in_f_vip:x,in_f_status_code:C,out_f_attr:b,out_f_vip:k,out_f_status_code:T,f_release:A,is_attr:1,page_hash:PAGE_HASH};if("cmd"==S.f_status){var O=$("#zhInstuction").find("input").val();O=O.toUpperCase(),S.cmd=O}d(S)}}),$("body").on("click",".flight_vip",function(t){t.preventDefault(),null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort();var e=$(this),a=$(this).parent().index(),i=s();""==i&&(i="cmd"),e.parent().parent().children("li").each(function(t){t!==a&&($(this).children("label").removeClass("active").children("input").removeAttr("checked"),v(i+"_attr_cookie"))});var l=[];$("input[name='f_attr[]']").each(function(){$(this).parent().hasClass("active")&&l.push($(this).val())});var c=[];$("input[name='in_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&c.push($(this).val())});var r=[];$("input[name='out_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&r.push($(this).val())});var o=[];$("input[name='f_vip[]']").each(function(){$(this).parent().hasClass("active")&&o.push($(this).val())});var h=[];$("input[name='in_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&h.push($(this).val())});var _=[];$("input[name='out_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&_.push($(this).val())});var f=[];$("input[name='f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&f.push($(this).val())});var u=[];$("input[name='in_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&u.push($(this).val())});var p=[];$("input[name='out_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&p.push($(this).val())});var m=[];if($("input[name='f_release_situation[]']").each(function(){$(this).parent().hasClass("active")&&m.push($(this).val())}),o.length>0||h.length>0||_.length>0){n({f_attr:l,f_vip:o,f_status_code:f,in_f_attr:c,in_f_vip:h,in_f_status_code:u,out_f_attr:r,out_f_vip:_,out_f_status_code:p,f_release:m,f_status:i});var g={init:1,start_time:$("#startTime").val(),end_time:$("#endTime").val(),pid:(new Date).getTime(),f_status:i,f_attr:l,f_vip:o,f_status_code:f,in_f_attr:c,in_f_vip:h,in_f_status_code:u,out_f_attr:r,out_f_vip:_,out_f_status_code:p,f_release:m,page_hash:PAGE_HASH};if("cmd"==g.f_status){var z=$("#zhInstuction").find("input").val();z=z.toUpperCase(),g.cmd=z}d(g)}}),$("body").on("click",".flight_status_code",function(t){t.preventDefault(),null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort();var e=$(this),a=0,i=e.find("input").attr("name");-1!==i.indexOf("in")?a=1:-1!==i.indexOf("out")&&(a=2);var l=$(this).parent().index(),c=s();if(""==c&&(c="cmd"),0!==l){if(e.parent().parent().children("li").eq(0).children("label").removeClass("active").children("input").removeAttr("checked"),void 0==e.children("input").attr("checked")){var r=e.children("input").val(),o=p(c+"_attr_cookie");if(o){var h=o.split("|");if(0==a)var _=h[2];else _=1==a?h[5]:h[8];var f=_.split(",");r=parseInt(r),-1!==$.inArray(r,f)&&(r+="",l=f.indexOf(r),f.splice(l,1),_=f.join(",")),m(c+"_attr_cookie",0==a?h[0]+"|"+h[1]+"|"+_+"|"+h[3]+"|"+h[4]+"|"+h[5]+"|"+h[6]+"|"+h[7]+"|"+h[8]:1==a?h[0]+"|"+h[1]+"|"+h[2]+"|"+h[3]+"|"+h[4]+"|"+_+"|"+h[6]+"|"+h[7]+"|"+h[8]:h[0]+"|"+h[1]+"|"+_+"|"+h[3]+"|"+h[4]+"|"+h[5]+"|"+h[6]+"|"+h[7]+"|"+_)}}}else e.parent().parent().children("li").each(function(t){0!==t&&($(this).children("label").removeClass("active").children("input").removeAttr("checked"),v(c+"_attr_cookie"))});var u=[];$("input[name='f_attr[]']").each(function(){$(this).parent().hasClass("active")&&u.push($(this).val())});var g=[];$("input[name='in_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&g.push($(this).val())});var z=[];$("input[name='out_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&z.push($(this).val())});var b=[];$("input[name='f_vip[]']").each(function(){$(this).parent().hasClass("active")&&b.push($(this).val())});var y=[];$("input[name='in_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&y.push($(this).val())});var x=[];$("input[name='out_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&x.push($(this).val())});var k=[];$("input[name='f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&k.push($(this).val())});var w=[];$("input[name='in_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&w.push($(this).val())});var C=[];$("input[name='out_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&C.push($(this).val())});var T=[];if($("input[name='f_release_situation[]']").each(function(){$(this).parent().hasClass("active")&&T.push($(this).val())}),k.length>0||w.length>0||C.length>0){n({f_attr:u,f_vip:b,f_status_code:k,in_f_attr:g,in_f_vip:y,in_f_status_code:w,out_f_attr:z,out_f_vip:x,out_f_status_code:C,f_release:T,f_status:c});var A={init:1,start_time:$("#startTime").val(),end_time:$("#endTime").val(),pid:(new Date).getTime(),f_status:c,f_attr:u,f_vip:b,f_status_code:k,in_f_attr:g,in_f_vip:y,in_f_status_code:w,out_f_attr:z,out_f_vip:x,out_f_status_code:C,f_release:T,page_hash:PAGE_HASH};if("cmd"==A.f_status){var S=$("#zhInstuction").find("input").val();S=S.toUpperCase(),A.cmd=S}d(A)}}),$("body").on("click",".release",function(t){t.preventDefault(),null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort();var e=$(this),a=0,i=e.find("input").attr("name");-1!==i.indexOf("in")?a=1:-1!==i.indexOf("out")&&(a=2);var l=$(this).parent().index(),c=s();if(""==c&&(c="cmd"),0!==l){if(e.parent().parent().children("li").eq(0).children("label").removeClass("active").children("input").removeAttr("checked"),void 0==e.children("input").attr("checked")){var r=e.children("input").val(),o=p(c+"_attr_cookie");if(o){var h=o.split("|");if(0==a)var _=h[2];else _=1==a?h[5]:h[8];var f=_.split(",");r=parseInt(r),-1!==$.inArray(r,f)&&(r+="",l=f.indexOf(r),f.splice(l,1),_=f.join(",")),m(c+"_attr_cookie",0==a?h[0]+"|"+h[1]+"|"+_+"|"+h[3]+"|"+h[4]+"|"+h[5]+"|"+h[6]+"|"+h[7]+"|"+h[8]:1==a?h[0]+"|"+h[1]+"|"+h[2]+"|"+h[3]+"|"+h[4]+"|"+_+"|"+h[6]+"|"+h[7]+"|"+h[8]:h[0]+"|"+h[1]+"|"+_+"|"+h[3]+"|"+h[4]+"|"+h[5]+"|"+h[6]+"|"+h[7]+"|"+_)}}}else e.parent().parent().children("li").each(function(t){0!==t&&($(this).children("label").removeClass("active").children("input").removeAttr("checked"),v(c+"_attr_cookie"))});var u=[];$("input[name='f_attr[]']").each(function(){$(this).parent().hasClass("active")&&u.push($(this).val())});var g=[];$("input[name='in_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&g.push($(this).val())});var z=[];$("input[name='out_f_attr[]']").each(function(){$(this).parent().hasClass("active")&&z.push($(this).val())});var b=[];$("input[name='f_vip[]']").each(function(){$(this).parent().hasClass("active")&&b.push($(this).val())});var y=[];$("input[name='in_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&y.push($(this).val())});var x=[];$("input[name='out_f_vip[]']").each(function(){$(this).parent().hasClass("active")&&x.push($(this).val())});var k=[];$("input[name='f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&k.push($(this).val())});var w=[];$("input[name='in_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&w.push($(this).val())});var C=[];$("input[name='out_f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&C.push($(this).val())});var T=[];if($("input[name='f_release_situation[]']").each(function(){$(this).parent().hasClass("active")&&T.push($(this).val())}),T.length>0){n({f_attr:u,f_vip:b,f_status_code:k,in_f_attr:g,in_f_vip:y,in_f_status_code:w,out_f_attr:z,out_f_vip:x,out_f_status_code:C,f_release:T,f_status:c});var A={init:1,start_time:$("#startTime").val(),end_time:$("#endTime").val(),pid:(new Date).getTime(),f_status:c,f_attr:u,f_vip:b,f_status_code:k,in_f_attr:g,in_f_vip:y,in_f_status_code:w,out_f_attr:z,out_f_vip:x,out_f_status_code:C,f_release:T,page_hash:PAGE_HASH};if("cmd"==A.f_status){var S=$("#zhInstuction").find("input").val();S=S.toUpperCase(),A.cmd=S}d(A)}}),g=b,$("body").on("click",".zh-fd-list .zh-order",function(){null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort();var t=$(this).find("span").eq(1).attr("order_field");$(this).siblings().find(".zh-icon-order").removeClass("zh-order-asc zh-order-desc");var e=$(this).find(".zh-icon-order");e.hasClass("zh-order-asc")?(e.removeClass("zh-order-asc"),e.addClass("zh-order-desc"),g.order_type="DESC"):(e.removeClass("zh-order-desc"),e.addClass("zh-order-asc"),g.order_type="ASC"),g.order_field=t;var a=s();if(""==a){a="cmd";var i=$("#zhInstuction").find("input").val();i=i.toUpperCase(),g.cmd=i}g.f_status=a,g.init=1,v(a+"_attr_cookie"),d(g)}),d(b),function(){if(0==in_out_all_flag)var t="in_0";else t="all_0";var e=$("#startTime").val(),a=$("#endTime").val(),i={init:1,pid:(new Date).getTime(),start_time:e,end_time:a,f_status:t};$("#zhInstuction input").on("input",function(){if(""===$.trim($(this).val())){null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort();var t=$("#startTime").val(),e=$("#endTime").val();if(i.start_time=t,i.end_time=e,i.init=1,0==in_out_all_flag)var a="in_0";else a="all_0";i.f_status=a,v("cmd_attr_cookie"),d(i)}}),$("button[type='reset']").click(function(){if(""==$("#zhInstuction input").val())return!1;if(null!=ajax_timer&&clearTimeout(ajax_timer),null!=ajax_request&&ajax_request.abort(),0==in_out_all_flag)var t="in_0";else t="all_0";i.f_status=t,i.init=1,d(i)}),$(document).keydown(function(t){switch(t.keyCode){case 13:if(t.preventDefault(),$("#zhInstuction input").is(":focus")){var e=$.trim($("#zhInstuction input").val());""!==e&&(c(e=e.toUpperCase()),-1==$.inArray(e,r)&&(r.length>=6&&r.shift(),r.push(e),localStorage.setItem("historyInstructions",r)),h())}else $("#zhInstuction input").focus();break;case 27:$("#zhInstuction input").is(":focus")&&$("#zhInstuction input").blur();break;case 46:if(""==$("#zhInstuction input").val())return!1;if($("#zhInstuction input").val(""),0==in_out_all_flag)var a="in_0";else a="all_0";i.f_status=a,d(i)}})}(),$(".export_list").click(function(){if(0==EXPORT_FLIGHT_PERMISSION)return show_no_permission(),!1;layer.msg("正在导出数据中,请稍候...",{time:2e3});var t=$("#startTime").val(),e=$("#endTime").val(),a=s(),i=[];$("input[name='f_attr[]']").each(function(){$(this).parent().hasClass("active")&&i.push($(this).val())});var l=[];$("input[name='f_vip[]']").each(function(){$(this).parent().hasClass("active")&&l.push($(this).val())});var n=[];$("input[name='f_status_code[]']").each(function(){$(this).parent().hasClass("active")&&n.push($(this).val())});var d="",c="",r=$(".flight-list-table").find(".zh-icon-order");if(r.length>0&&r.each(function(t){return $(this).hasClass("zh-order-asc")?(d=$(this).attr("order_field"),c="ASC",!1):$(this).hasClass("zh-order-desc")?(d=$(this).attr("order_field"),c="DESC",!1):void 0}),""==a){a="cmd";var o=$("#zhInstuction").find("input").val();o=o.toUpperCase(),window.location.href=EXPORT_FLIGHT_LIST_URL+"?start_time="+t+"&end_time="+e+"&f_status="+a+"&cmd="+o+"&f_attr="+i+"&f_vip="+l+"&f_status_code="+n+"&order_field="+d+"&order_type="+c}else window.location.href=EXPORT_FLIGHT_LIST_URL+"?start_time="+t+"&end_time="+e+"&f_status="+a+"&f_attr="+i+"&f_vip="+l+"&f_status_code="+n+"&order_field="+d+"&order_type="+c}),$(".export_vip_list").click(function(){layer.msg("正在导出数据中,请稍候...",{time:2e3});var t=$("#startTime").val(),e=$("#endTime").val();window.location.href=EXPORT_FLIGHT_VIP_LIST_URL+"?start_time="+t+"&end_time="+e}),setTimeout(f,2e4),setTimeout(u,2e4),0==in_out_all_flag?z():(flight_param={init:1,page_hash:PAGE_HASH,type:"depart"},y()),$("body").on("click",".show_fid",function(){var t=$(this).parent().attr("id").split("_");t.length>0&&alert(t[2])})}}$(function(){(new flightDynamicClass).init()});